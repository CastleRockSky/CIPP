(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2551],{21853:(e,i,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/tenant/gdap-management",function(){return t(77319)}])},45297:(e,i,t)=>{"use strict";t.d(i,{s:()=>m});var n=t(37876),l=t(14232),s=t(54538),a=t(22474),o=t(94810),d=t(22430),r=t(67578),c=t(77018),v=t(76776),u=t(59568),p=t(57016),h=t(5419);let m=e=>{let{data:i,isFetching:t}=e,[m,x]=(0,l.useState)(null);return(0,n.jsx)(s.A,{children:(0,n.jsx)(u.A,{container:!0,children:i.map((e,i)=>{var l,s,g,A,f;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.A,{size:{md:3,sm:6,xs:12},onClick:e.offcanvas?()=>x(i):void 0,sx:{cursor:e.offcanvas?"pointer":"default",borderBottom:e=>({xs:"1px solid ".concat(e.palette.divider),md:"none"}),borderRight:e=>({md:"1px solid ".concat(e.palette.divider)}),"&:nth-of-type(3)":{borderBottom:e=>({xs:"1px solid ".concat(e.palette.divider),sm:"none"})},"&:nth-of-type(4)":{borderBottom:"none",borderRight:"none"}},children:(0,n.jsxs)(a.A,{alignItems:"center",direction:"row",spacing:2,sx:{p:2},children:[(null==e?void 0:e.icon)&&(0,n.jsx)(o.A,{color:e.color?e.color:"primary",fontSize:"small",children:e.icon}),(null==e?void 0:e.toolTip)?(0,n.jsx)(d.A,{title:e.toolTip,children:(0,n.jsxs)(r.A,{sx:()=>{if(!(null==e?void 0:e.icon))return{pl:2}},children:[(0,n.jsx)(c.A,{color:"text.secondary",variant:"overline",children:e.name}),(0,n.jsx)(c.A,{variant:"h6",children:t?(0,n.jsx)(v.A,{width:"100%"}):e.data})]})}):(0,n.jsxs)(r.A,{sx:()=>{if(!(null==e?void 0:e.icon))return{pl:2}},children:[(0,n.jsx)(c.A,{color:"text.secondary",variant:"overline",children:e.name}),(0,n.jsx)(c.A,{variant:"h6",children:t?(0,n.jsx)(v.A,{width:"100%"}):e.data})]})]})},e.name),e.offcanvas&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(p.w,{title:(null==e?void 0:null===(l=e.offcanvas)||void 0===l?void 0:l.title)||"Details",size:"md",visible:m===i,onClose:()=>x(null),children:(0,n.jsx)(r.A,{sx:{overflowY:"auto",maxHeight:"100%",display:"flex",flexDirection:"column"},children:(0,n.jsx)(u.A,{container:!0,spacing:1,children:(0,n.jsx)(u.A,{size:{xs:12},children:(null==e?void 0:null===(g=e.offcanvas)||void 0===g?void 0:null===(s=g.propertyItems)||void 0===s?void 0:s.length)>0&&(0,n.jsx)(h.a,{isFetching:t,align:"vertical",title:null==e?void 0:null===(A=e.offcanvas)||void 0===A?void 0:A.title,propertyItems:null!==(f=e.offcanvas.propertyItems)&&void 0!==f?f:[]})})})})})})]})})})})}},46950:(e,i,t)=>{"use strict";t.d(i,{A:()=>s});var n=t(93944),l=t(37876);let s=(0,n.A)([(0,l.jsx)("path",{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6"},"0"),(0,l.jsx)("path",{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12m0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17"},"1")],"AdminPanelSettings")},76465:(e,i,t)=>{"use strict";t.d(i,{A:()=>s});var n=t(93944),l=t(37876);let s=(0,n.A)((0,l.jsx)("path",{d:"m18 22-.01-6L14 12l3.99-4.01L18 2H6v6l4 4-4 3.99V22zM8 7.5V4h8v3.5l-4 4z"}),"HourglassBottom")},77319:(e,i,t)=>{"use strict";t.r(i),t.d(i,{default:()=>b});var n=t(37876),l=t(17055),s=t(12435),a=t(96724),o=t(4739),d=t(59568),r=t(45297),c=t(22322),v=t(93944);let u=(0,v.A)((0,n.jsx)("path",{d:"M16.5 12c1.38 0 2.49-1.12 2.49-2.5S17.88 7 16.5 7 14 8.12 14 9.5s1.12 2.5 2.5 2.5M9 11c1.66 0 2.99-1.34 2.99-3S10.66 5 9 5 6 6.34 6 8s1.34 3 3 3m7.5 3c-1.83 0-5.5.92-5.5 2.75V19h11v-2.25c0-1.83-3.67-2.75-5.5-2.75M9 13c-2.33 0-7 1.17-7 3.5V19h7v-2.25c0-.85.33-2.34 2.37-3.47C10.5 13.1 9.66 13 9 13"}),"SupervisorAccount");var p=t(46950);let h=(0,v.A)((0,n.jsx)("path",{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27z"}),"Layers");var m=t(76465),x=t(95339),g=t(80479),A=t(47737),f=t(14232),j=t(84064),y=t(66375),R=t(48230),P=t.n(R);let S=()=>{var e,i,t,l,s,a,v,R,S,b,L,D;let[G,w]=(0,f.useState)(!1),[C,I]=(0,f.useState)(0),T=(0,c.Zs)({url:"/api/ListGraphRequest",data:{Endpoint:"tenantRelationships/delegatedAdminRelationships",tenantFilter:"",$top:300},queryKey:"ListGDAPRelationships"}),z=(0,c.Zs)({url:"/api/ListGDAPRoles",queryKey:"ListGDAPRoles"}),_=(0,c.Zs)({url:"/api/ExecGDAPRoleTemplate",queryKey:"ListGDAPRoleTemplates"}),F=(0,c.Zs)({url:"/api/ListGDAPInvite",queryKey:"ListGDAPInvite"});return(0,c.nN)({urlFromData:!0,relatedQueryKeys:["ListGDAPRoleTemplates","ListGDAPRoles"]}),(0,f.useEffect)(()=>{if(_.isSuccess){var e,i,t,n,l,s,a=!0;(null==_?void 0:null===(t=_.data)||void 0===t?void 0:null===(i=t.pages)||void 0===i?void 0:null===(e=i[0].Results)||void 0===e?void 0:e.length)>0&&(null==_?void 0:null===(s=_.data)||void 0===s?void 0:null===(l=s.pages)||void 0===l?void 0:null===(n=l[0].Results)||void 0===n?void 0:n.find(e=>(null==e?void 0:e.TemplateId)==="CIPP Defaults"))&&(a=!1),w(a)}},[_]),(0,f.useEffect)(()=>{if(z.isSuccess&&_.isSuccess&&F.isSuccess){var e,i,t,n,l,s,a,o,d,r;(null==z?void 0:null===(t=z.data)||void 0===t?void 0:null===(i=t.pages)||void 0===i?void 0:null===(e=i[0])||void 0===e?void 0:e.length)>0&&(I(1),(null==_?void 0:null===(a=_.data)||void 0===a?void 0:null===(s=a.pages)||void 0===s?void 0:null===(l=s[0])||void 0===l?void 0:null===(n=l.Results)||void 0===n?void 0:n.length)>0&&(I(2),(null==F?void 0:null===(r=F.data)||void 0===r?void 0:null===(d=r.pages)||void 0===d?void 0:null===(o=d[0])||void 0===o?void 0:o.length)>0&&I(4)))}},[T.isSuccess,z.isSuccess,_.isSuccess,_.isFetching,F.isSuccess]),(0,n.jsx)(o.A,{sx:{flexGrow:1,py:2},maxWidth:!1,children:(0,n.jsxs)(d.A,{container:!0,spacing:2,children:[(0,n.jsx)(d.A,{size:12,children:(0,n.jsx)(r.s,{isFetching:T.isFetching||z.isFetching||_.isFetching||F.isFetching,data:[{icon:(0,n.jsx)(u,{}),data:null!==(S=null===(i=T.data)||void 0===i?void 0:null===(e=i.pages)||void 0===e?void 0:e.map(e=>{var i;return null==e?void 0:null===(i=e.Results)||void 0===i?void 0:i.length}).reduce((e,i)=>e+i,0))&&void 0!==S?S:0,name:"GDAP Relationships",color:"secondary"},{icon:(0,n.jsx)(p.A,{}),data:null!==(b=null===(l=z.data)||void 0===l?void 0:null===(t=l.pages)||void 0===t?void 0:t.map(e=>null==e?void 0:e.length).reduce((e,i)=>e+i,0))&&void 0!==b?b:0,name:"Mapped Admin Roles",color:"green"},{icon:(0,n.jsx)(h,{}),data:null!==(L=null===(a=_.data)||void 0===a?void 0:null===(s=a.pages)||void 0===s?void 0:s.map(e=>{var i;return null==e?void 0:null===(i=e.Results)||void 0===i?void 0:i.length}).reduce((e,i)=>e+i,0))&&void 0!==L?L:0,name:"Role Templates"},{icon:(0,n.jsx)(m.A,{}),data:null!==(D=null===(R=F.data)||void 0===R?void 0:null===(v=R.pages)||void 0===v?void 0:v.map(e=>null==e?void 0:e.length).reduce((e,i)=>e+i,0))&&void 0!==D?D:0,name:"Pending Invites"}]})}),(0,n.jsx)(d.A,{size:12,children:(0,n.jsx)(A.A,{LinkComponent:P(),href:"/tenant/gdap-management/invites/add",startIcon:(0,n.jsx)(x.A,{}),variant:"contained",children:"Add a Tenant"})}),(0,n.jsx)(d.A,{size:{xs:12,sm:6},children:(0,n.jsx)(j.A,{title:"GDAP Setup",cardSx:{display:"flex",flexDirection:"column",height:"100%",width:"100%"},children:(0,n.jsx)(y.L,{activeStep:C,orientation:"vertical",steps:[{title:"Map your Admin Roles",description:"Use CIPP to map Admin Roles to Security Groups in your partner tenant."},{title:"Create Role Templates",description:"Create Templates for your Role Mappings."},{title:"Create Invites",description:"Create invites based on your Role Templates."},{title:"Setup Complete",description:"You're ready to start adding your tenants using CIPP."}]})})}),(0,n.jsx)(d.A,{size:{xs:12,sm:6},children:(0,n.jsx)(g.A,{type:"GDAP"})})]})})};S.getLayout=e=>(0,n.jsx)(s.P,{children:(0,n.jsx)(l.L,{tabOptions:a,children:e})});let b=S},96724:e=>{"use strict";e.exports=JSON.parse('[{"label":"Overview","path":"/tenant/gdap-management"},{"label":"Relationships","path":"/tenant/gdap-management/relationships"},{"label":"Role Mappings","path":"/tenant/gdap-management/roles"},{"label":"Role Templates","path":"/tenant/gdap-management/role-templates"},{"label":"Invites","path":"/tenant/gdap-management/invites"},{"label":"Onboarding","path":"/tenant/gdap-management/onboarding"},{"label":"Offboarding","path":"/tenant/gdap-management/offboarding"}]')}},e=>{var i=i=>e(e.s=i);e.O(0,[9365,636,6593,8792],()=>i(21853)),_N_E=e.O()}]);