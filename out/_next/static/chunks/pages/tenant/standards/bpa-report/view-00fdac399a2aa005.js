(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4200],{1462:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>P});var r=a(37876),n=a(12435),i=a(67578),l=a(86650),s=a(22474),o=a(47737),d=a(94810),c=a(77018),u=a(76776),m=a(46061),h=a(59017),f=a(59568),v=a(77328),x=a.n(v),p=a(88917),A=a(89099),j=a(22322),g=a(17825),y=a(14232),b=a(84064),T=a(31540),w=a(12003),_=a(82851),S=a.n(_);let N=()=>{let e=(0,A.useRouter)(),{id:t}=e.query,[a,n]=(0,y.useState)([]),[v,_]=(0,y.useState)("Table"),N=(0,j.R_)({url:"/api/listBPATemplates",queryKey:"ListBPATemplates-All"}),P=(0,g.t)().currentTenant,B=(0,j.R_)({url:"/api/listBPA",data:{tenantFilter:P,report:t},queryKey:"ListBPA-".concat(t,"-").concat(P)}),D=(0,j.R_)({url:"/api/ListTenants",queryKey:"TenantSelector"}),F=(0,g.t)().currentTenant;(0,y.useEffect)(()=>{if(N.isSuccess){let d=N.data.find(t=>t.Name===e.query.id);if(d){var t,a,r,i,l,s,o;if(_(d.Style),"Tenant"===d.Style){let e=d.Data.map(e=>e.FrontendFields[0]);if(B.isSuccess){let i=null==D?void 0:null===(t=D.data.find(e=>(null==e?void 0:e.defaultDomainName)===P))||void 0===t?void 0:t.customerId,l=null==B?void 0:null===(r=B.data)||void 0===r?void 0:null===(a=r.Data)||void 0===a?void 0:a.find(e=>e.GUID===i);n(e.map(e=>{let t=S().get(l,e.value)?S().get(l,e.value):void 0;return{name:e.name,value:e.value,desc:e.desc,formatter:e.formatter,data:t}}))}}if("Table"===d.Style&&B.isSuccess){let e=d.Data.map(e=>e.FrontendFields);if(B.isSuccess){let t=null==D?void 0:null===(i=D.data.find(e=>(null==e?void 0:e.defaultDomainName)===P))||void 0===i?void 0:i.customerId,a="AllTenants"!==F?null==B?void 0:null===(s=B.data)||void 0===s?void 0:null===(l=s.Data)||void 0===l?void 0:l.find(e=>e.GUID===t):null==B?void 0:null===(o=B.data)||void 0===o?void 0:o.Data,r=e.flat().map(e=>{var t;return(null==e?void 0:null===(t=e.value)||void 0===t?void 0:t.includes(" "))?e.value.split(" ")[0]:e.value});a=(a=Array.isArray(a)?a:[a]).map(e=>(r.unshift("Tenant"),e)),n([{simpleColumns:r,formatter:"table",name:"BPA Table Report",data:a}])}}}}},[N.isSuccess,B.isSuccess,B.data,F,e]);let k="BPA Report Viewer - ".concat(F);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x(),{children:(0,r.jsx)("title",{children:k})}),(0,r.jsx)(i.A,{sx:{flexGrow:1,py:4},children:(0,r.jsxs)(l.A,{maxWidth:!1,children:[(0,r.jsxs)(s.A,{spacing:4,children:[(0,r.jsx)(s.A,{direction:"row",justifyContent:"space-between",alignItems:"center",children:(0,r.jsx)(o.A,{color:"inherit",onClick:()=>e.back(),startIcon:(0,r.jsx)(d.A,{fontSize:"small",children:(0,r.jsx)(p.A6,{})}),children:"Back to Templates"})}),(0,r.jsx)(f.A,{container:!0,spacing:2,children:(0,r.jsx)(f.A,{size:{md:4,sm:6,xs:10},children:(0,r.jsx)(c.A,{variant:"h4",gutterBottom:!0,children:k})})})]}),N.isLoading&&(0,r.jsx)(u.A,{}),(0,r.jsx)(f.A,{container:!0,spacing:2,children:"AllTenants"===F&&"Table"!==v?(0,r.jsx)(f.A,{size:{md:4,sm:6,xs:10},children:(0,r.jsx)(w.k,{title:"Not supported",imageUrl:"/assets/illustrations/undraw_website_ij0l.svg",text:"This report does not support All Tenants, please select a different tenant using the tenant selector."})}):(0,r.jsx)(r.Fragment,{children:a.map((e,t)=>(0,r.jsx)(f.A,{size:{md:"Table"===v?12:4,sm:"Table"===v?12:6,xs:10},children:(0,r.jsx)(b.A,{cardSx:{display:"flex",flexDirection:"column",height:"100%"},title:e.name,CardButton:(0,r.jsx)(c.A,{color:"text.secondary",variant:"body2",children:e.desc}),children:void 0===e.data?(0,r.jsx)(m.A,{severity:"info",children:"No data has been found for this item. This tenant might not be licensed for this feature, or data collection failed. Please check the logs for more information."}):"String"===e.formatter?(0,r.jsx)(c.A,{variant:"h6",color:"textPrimary",children:e.data}):"bool"===e.formatter?(0,r.jsx)(h.A,{label:e.data?"Yes":"No",color:e.data?"success":"error"}):"warnBool"===e.formatter?(0,r.jsx)(h.A,{label:e.data?"Yes":"No",color:e.data?"success":"warning"}):"reverseBool"===e.formatter?(0,r.jsx)(h.A,{label:e.data?"No":"Yes",color:e.data?"error":"success"}):"number"===e.formatter?(0,r.jsx)(c.A,{variant:"h1",color:"textPrimary",children:(0,r.jsx)("center",{children:e.data})}):"Percentage"===e.formatter?(0,r.jsx)(r.Fragment,{children:e.data}):"table"===e.formatter?(0,r.jsx)(T.x,{data:e.data,simple:!1,noCard:!0,incorrectDataMessage:"No data has been found for this report.",simpleColumns:null==e?void 0:e.simpleColumns,isFetching:B.isFetching,refreshFunction:()=>B.refetch()}):(0,r.jsx)(c.A,{variant:"h6",color:"textPrimary",children:"Something is wrong with your report. This field is not formatted correctly."})})},e.name))})})]})})]})};N.getLayout=e=>(0,r.jsx)(n.P,{children:e});let P=N},45988:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/tenant/standards/bpa-report/view",function(){return a(1462)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[888,636,6593,8792],()=>t(45988)),_N_E=e.O()}]);