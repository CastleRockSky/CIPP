(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6440],{38968:(e,t,l)=>{"use strict";l.d(t,{O:()=>d});var s=l(37876),r=l(22474),a=l(46061),n=l(77018),i=l(67578),o=l(58105);let d=e=>{var t;let{formControl:l,availableRoles:d}=e;return(0,s.jsxs)(r.A,{spacing:2,sx:{mt:2},children:[(0,s.jsx)(a.A,{severity:"info",children:(0,s.jsx)(n.A,{variant:"subtitle",children:"GDAP Role templates are used to create new GDAP invites for your customer tenants. Make sure to select a template that matches the permissions you want to grant."})}),(0,s.jsx)(i.A,{children:(0,s.jsx)(o.A,{formControl:l,name:"templateId",label:"Template Name",type:"textField",required:!0})}),(0,s.jsx)(o.A,{formControl:l,name:"roleMappings",label:"Select GDAP Role Mappings",type:"autoComplete",isFetching:null==d?void 0:d.isFetching,options:null==d?void 0:null===(t=d.data)||void 0===t?void 0:t.map(e=>({label:e.GroupName,value:e.GroupId,addedFields:e})),multiple:!0,creatable:!1,required:!0,validators:{validate:e=>!!e&&0!==e.length||"Please select at least one GDAP Role Mapping"},sortOptions:!0})]})}},42120:(e,t,l)=>{"use strict";l.d(t,{A:()=>a});var s=l(93944),r=l(37876);let a=(0,s.A)((0,r.jsx)("path",{d:"m14 7-5 5 5 5z"}),"ArrowLeft")},56348:(e,t,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/tenant/gdap-management/role-templates/add",function(){return l(76454)}])},76454:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>c});var s=l(37876),r=l(90240),a=l(12435),n=l(88992),i=l(38968),o=l(22322);let d=()=>{let e=(0,n.mN)({mode:"onChange"}),t=(0,o.R_)({url:"/api/ListGDAPRoles",queryKey:"ListGDAPRolesAutocomplete"});return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(r.A,{queryKey:"ListGDAPRoleTemplates",formControl:e,title:"GDAP Role Template",backButtonTitle:"GDAP Role Templates",postUrl:"/api/ExecGDAPRoleTemplate?Action=Add",customDataformatter:e=>{var l=[];return e.roleMappings.map(e=>{var s=t.data.find(t=>t.GroupId===e.value);l.push(s)}),{templateId:e.templateId,roleMappings:l}},children:(0,s.jsx)(i.O,{formControl:e,availableRoles:t})})})};d.getLayout=e=>(0,s.jsx)(a.P,{children:e});let c=d},90240:(e,t,l)=>{"use strict";l.d(t,{A:()=>v});var s=l(37876),r=l(89099),a=l(67578),n=l(86650),i=l(22474),o=l(47737),d=l(94810),c=l(77018),u=l(54538),p=l(24933),m=l(17675),h=l(42120),x=l(22322),A=l(68723),j=l(14232),g=l(88992),f=l(2303);let v=e=>{let{title:t,backButtonTitle:l,titleButton:v,formPageType:y="Add",children:b,queryKey:P,formControl:G,postUrl:_,customDataformatter:w,resetForm:C=!1,hideBackButton:R=!1,hidePageType:D=!1,hideTitle:k=!1,hideSubmit:N=!1,allowResubmit:E=!1,addedButtons:F,...T}=e,q=(0,r.useRouter)(),I=(0,x.nN)({datafromUrl:!0,relatedQueryKeys:P}),{isValid:O,isDirty:M}=(0,g.lN)({control:G.control});return(0,j.useEffect)(()=>{if(delete q.query.tenantFilter,q.query){let e={...G.getValues(),...q.query};G.reset(e)}},[q]),(0,j.useEffect)(()=>{I.isSuccess&&C&&G.reset()},[I.isSuccess]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.v,{title:t}),(0,s.jsx)(a.A,{sx:{flexGrow:1,py:4},children:(0,s.jsx)(n.A,{maxWidth:"lg",children:(0,s.jsxs)(i.A,{spacing:4,children:[!k&&(0,s.jsxs)(i.A,{spacing:2,children:[!R&&(0,s.jsx)("div",{children:(0,s.jsx)(o.A,{color:"inherit",onClick:()=>{q.back()},startIcon:(0,s.jsx)(d.A,{fontSize:"small",children:(0,s.jsx)(h.A,{})}),children:l})}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,s.jsxs)(c.A,{variant:"h4",children:[!D&&(0,s.jsxs)(s.Fragment,{children:[y," - "]}),t]}),v&&v]})]}),(0,s.jsxs)(u.A,{children:[(0,s.jsxs)(p.A,{children:[b,(0,s.jsx)(A.v,{apiObject:I})]}),!N&&(0,s.jsx)(m.A,{sx:{justifyContent:"flex-end"},children:(0,s.jsxs)(i.A,{spacing:2,direction:"row",children:[F&&F,(0,s.jsx)(o.A,{disabled:I.isPending||!O||!E&&!M,onClick:G.handleSubmit(()=>{if(G.trigger(),!O)return;let e=w?w(G.getValues()):G.getValues();Object.keys(e).forEach(t=>{(""===e[t]||null===e[t])&&delete e[t]}),I.mutate({url:_,data:e})}),type:"submit",variant:"contained",children:"Submit"})]})})]})]})})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,6593,8792],()=>t(56348)),_N_E=e.O()}]);