(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6207],{32228:(e,t,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/tenant/gdap-management/role-templates/edit",function(){return l(45595)}])},38968:(e,t,l)=>{"use strict";l.d(t,{O:()=>d});var s=l(37876),a=l(22474),r=l(46061),i=l(77018),n=l(67578),o=l(58105);let d=e=>{var t;let{formControl:l,availableRoles:d}=e;return(0,s.jsxs)(a.A,{spacing:2,sx:{mt:2},children:[(0,s.jsx)(r.A,{severity:"info",children:(0,s.jsx)(i.A,{variant:"subtitle",children:"GDAP Role templates are used to create new GDAP invites for your customer tenants. Make sure to select a template that matches the permissions you want to grant."})}),(0,s.jsx)(n.A,{children:(0,s.jsx)(o.A,{formControl:l,name:"templateId",label:"Template Name",type:"textField",required:!0})}),(0,s.jsx)(o.A,{formControl:l,name:"roleMappings",label:"Select GDAP Role Mappings",type:"autoComplete",isFetching:null==d?void 0:d.isFetching,options:null==d?void 0:null===(t=d.data)||void 0===t?void 0:t.map(e=>({label:e.GroupName,value:e.GroupId,addedFields:e})),multiple:!0,creatable:!1,required:!0,validators:{validate:e=>!!e&&0!==e.length||"Please select at least one GDAP Role Mapping"},sortOptions:!0})]})}},42120:(e,t,l)=>{"use strict";l.d(t,{A:()=>r});var s=l(93944),a=l(37876);let r=(0,s.A)((0,a.jsx)("path",{d:"m14 7-5 5 5 5z"}),"ArrowLeft")},45595:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>p});var s=l(37876),a=l(90240),r=l(12435),i=l(88992),n=l(38968),o=l(22322),d=l(14232),u=l(89099);let c=()=>{let{templateId:e}=(0,u.useRouter)().query,t=(0,i.mN)({mode:"onChange"}),l=(0,o.R_)({url:"/api/ListGDAPRoles",queryKey:"ListGDAPRolesAutocomplete"}),r=(0,o.Zs)({url:"/api/ExecGDAPRoleTemplate",queryKey:"ListGDAPRoleTemplates"});return(0,d.useEffect)(()=>{if(r.isSuccess){let n=null==r?void 0:null===(a=r.data)||void 0===a?void 0:null===(s=a.pages)||void 0===s?void 0:null===(l=s[0])||void 0===l?void 0:l.Results.find(t=>t.TemplateId===e);var l,s,a,i=[];n.RoleMappings.map(e=>i.push({label:e.GroupName,value:e.GroupId})),t.reset({templateId:n.TemplateId,roleMappings:i})}},[r.isSuccess,r.data]),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(a.A,{queryKey:"ListGDAPRoleTemplates",formControl:t,title:"GDAP Role Template",backButtonTitle:"GDAP Role Templates",postUrl:"/api/ExecGDAPRoleTemplate?Action=Edit",customDataformatter:e=>{var t=[];return e.roleMappings.map(e=>{var s=l.data.find(t=>t.GroupId===e.value);t.push(s)}),{templateId:e.templateId,roleMappings:t}},children:(0,s.jsx)(n.O,{formControl:t,availableRoles:l})})})};c.getLayout=e=>(0,s.jsx)(r.P,{children:e});let p=c},90240:(e,t,l)=>{"use strict";l.d(t,{A:()=>g});var s=l(37876),a=l(89099),r=l(67578),i=l(86650),n=l(22474),o=l(47737),d=l(94810),u=l(77018),c=l(54538),p=l(24933),m=l(17675),h=l(42120),x=l(22322),A=l(68723),v=l(14232),j=l(88992),f=l(2303);let g=e=>{let{title:t,backButtonTitle:l,titleButton:g,formPageType:y="Add",children:b,queryKey:G,formControl:P,postUrl:R,customDataformatter:D,resetForm:_=!1,hideBackButton:w=!1,hidePageType:C=!1,hideTitle:E=!1,hideSubmit:T=!1,allowResubmit:I=!1,addedButtons:N,...k}=e,q=(0,a.useRouter)(),F=(0,x.nN)({datafromUrl:!0,relatedQueryKeys:G}),{isValid:M,isDirty:S}=(0,j.lN)({control:P.control});return(0,v.useEffect)(()=>{if(delete q.query.tenantFilter,q.query){let e={...P.getValues(),...q.query};P.reset(e)}},[q]),(0,v.useEffect)(()=>{F.isSuccess&&_&&P.reset()},[F.isSuccess]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.v,{title:t}),(0,s.jsx)(r.A,{sx:{flexGrow:1,py:4},children:(0,s.jsx)(i.A,{maxWidth:"lg",children:(0,s.jsxs)(n.A,{spacing:4,children:[!E&&(0,s.jsxs)(n.A,{spacing:2,children:[!w&&(0,s.jsx)("div",{children:(0,s.jsx)(o.A,{color:"inherit",onClick:()=>{q.back()},startIcon:(0,s.jsx)(d.A,{fontSize:"small",children:(0,s.jsx)(h.A,{})}),children:l})}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,s.jsxs)(u.A,{variant:"h4",children:[!C&&(0,s.jsxs)(s.Fragment,{children:[y," - "]}),t]}),g&&g]})]}),(0,s.jsxs)(c.A,{children:[(0,s.jsxs)(p.A,{children:[b,(0,s.jsx)(A.v,{apiObject:F})]}),!T&&(0,s.jsx)(m.A,{sx:{justifyContent:"flex-end"},children:(0,s.jsxs)(n.A,{spacing:2,direction:"row",children:[N&&N,(0,s.jsx)(o.A,{disabled:F.isPending||!M||!I&&!S,onClick:P.handleSubmit(()=>{if(P.trigger(),!M)return;let e=D?D(P.getValues()):P.getValues();Object.keys(e).forEach(t=>{(""===e[t]||null===e[t])&&delete e[t]}),F.mutate({url:R,data:e})}),type:"submit",variant:"contained",children:"Submit"})]})})]})]})})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,6593,8792],()=>t(32228)),_N_E=e.O()}]);