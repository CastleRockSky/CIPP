(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2098],{12252:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/tenant/administration/tenants/edit",function(){return a(12988)}])},12988:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var l=a(37876),n=a(12435),i=a(88992),r=a(22322),s=a(14232),o=a(89099),d=a(58105),c=a(67578),u=a(8578),m=a(76626),p=a(77018),h=a(22474),x=a(59568),v=a(68978),b=a(76386),A=a(36577),y=a(5419),j=a(35936),f=a(57007);function T(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}let g=()=>{var e,t,a,n,g,w;let{id:C}=(0,o.useRouter)().query,E=(0,i.mN)({mode:"onChange"}),[k,K]=(0,s.useState)(0),_=(0,r.R_)({url:C?"/api/ListTenantDetails?tenantFilter=".concat(C):null,queryKey:C?"TenantProperties_".concat(C):null});return(0,s.useEffect)(()=>{if(_.isSuccess&&_.data){var e,t,a,l;E.reset({customerId:C,Alias:null!==(l=null==_?void 0:null===(t=_.data)||void 0===t?void 0:null===(e=t.customProperties)||void 0===e?void 0:e.Alias)&&void 0!==l?l:"",Groups:(null===(a=_.data.Groups)||void 0===a?void 0:a.map(e=>({label:e.Name,value:e.Id})))||[]})}},[_.isSuccess,_.data]),(0,l.jsx)(A.A,{title:_.isSuccess?"Edit Tenant - ".concat(null!==(w=null==_?void 0:null===(t=_.data)||void 0===t?void 0:null===(e=t.customProperties)||void 0===e?void 0:e.Alias)&&void 0!==w?w:null==_?void 0:null===(a=_.data)||void 0===a?void 0:a.displayName):"Loading...",backButtonTitle:"Tenants",noTenantInHead:!0,children:(0,l.jsxs)(c.A,{sx:{width:"100%"},children:[(0,l.jsx)(c.A,{sx:{borderBottom:1,borderColor:"divider",px:"24px",m:"auto"},children:(0,l.jsxs)(u.A,{value:k,onChange:(e,t)=>{K(t)},"aria-label":"Edit Tenant Tabs",children:[(0,l.jsx)(m.A,{label:"General",...T(0)}),(0,l.jsx)(m.A,{label:"Custom Variables",...T(1)})]})}),(0,l.jsx)(v.K,{value:k,index:0,children:(0,l.jsxs)(x.A,{container:!0,spacing:2,sx:{my:2,px:2},children:[(0,l.jsx)(x.A,{size:{md:4,xs:12},children:(0,l.jsx)(y.a,{variant:"outlined",title:"Tenant Details",propertyItems:[{label:"Display Name",value:null===(n=_.data)||void 0===n?void 0:n.displayName},{label:"Tenant ID",value:(0,j.i)(null===(g=_.data)||void 0===g?void 0:g.id,"Tenant")}],showDivider:!1,isFetching:_.isFetching})}),(0,l.jsx)(x.A,{size:{md:8,xs:12},children:(0,l.jsxs)(b.A,{relatedQueryKeys:["TenantProperties_".concat(C),"ListTenants-notAllTenants","TenantSelector"],formControl:E,title:"Edit Tenant",backButtonTitle:"Tenants",postUrl:"/api/EditTenant",customDataformatter:e=>({tenantAlias:e.Alias,tenantGroups:e.Groups.map(e=>({groupId:e.value,groupName:e.label})),customerId:C}),children:[(0,l.jsx)(p.A,{variant:"h6",children:"Properties"}),(0,l.jsxs)(h.A,{spacing:1,sx:{mt:2},children:[(0,l.jsx)(d.A,{type:"textField",name:"Alias",label:"Tenant Alias",placeholder:"Enter a custom alias for this tenant to be displayed in CIPP.",formControl:E,isFetching:_.isFetching,disabled:_.isFetching}),(0,l.jsx)(d.A,{creatable:!1,type:"autoComplete",name:"Groups",label:"Tenant Groups",placeholder:"Select the groups this tenant belongs to.",formControl:E,multiple:!0,api:{url:"/api/ListTenantGroups",queryKey:"AllTenantGroups",dataKey:"Results",labelField:"Name",valueField:"Id"},disabled:_.isFetching})]})]})})]})}),(0,l.jsx)(v.K,{value:k,index:1,children:(0,l.jsx)(f.A,{id:C})})]})})};g.getLayout=e=>(0,l.jsx)(n.P,{children:e});let w=g},36577:(e,t,a)=>{"use strict";a.d(t,{A:()=>h});var l=a(37876),n=a(89099),i=a(67578),r=a(86650),s=a(22474),o=a(47737),d=a(94810),c=a(77018),u=a(54538),m=a(42120),p=a(2303);let h=e=>{let{title:t,backButtonTitle:a="Back",children:h,cardSize:x="xl",hideTitleText:v=!1,hideBackButton:b=!1,noTenantInHead:A=!1,infoBar:y}=e,j=(0,n.useRouter)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.v,{title:t,noTenant:A}),(0,l.jsx)(i.A,{sx:{flexGrow:1,py:4},children:(0,l.jsx)(r.A,{maxWidth:x,children:(0,l.jsxs)(s.A,{spacing:2,children:[(0,l.jsxs)(s.A,{spacing:2,children:[(0,l.jsx)("div",{children:!b&&(0,l.jsx)(o.A,{color:"inherit",onClick:()=>{j.back()},startIcon:(0,l.jsx)(d.A,{fontSize:"small",children:(0,l.jsx)(m.A,{})}),children:a})}),!0!==v&&(0,l.jsx)("div",{children:(0,l.jsx)(c.A,{variant:"h4",children:t})})]}),y,(0,l.jsx)(u.A,{children:h})]})})})]})}},41055:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var l=a(14232);let n=l.forwardRef(function(e,t){let{title:a,titleId:n,...i}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),a?l.createElement("title",{id:n},a):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))})},42120:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var l=a(93944),n=a(37876);let i=(0,l.A)((0,n.jsx)("path",{d:"m14 7-5 5 5 5z"}),"ArrowLeft")},57007:(e,t,a)=>{"use strict";a.d(t,{A:()=>v});var l=a(37876),n=a(14232),i=a(94810),r=a(24933),s=a(46061),o=a(47737),d=a(65868),c=a(41055),u=a(44681),m=a(31540),p=a(68723),h=a(79803),x=a(22322);let v=e=>{let{id:t}=e,[a,v]=(0,n.useState)(!1),b=(0,x.nN)({urlFromData:!0,relatedQueryKeys:["CustomVariables_".concat(t)]}),A=["tenantid","tenantname","tenantfilter","partnertenantid","samappid"],y=e=>A.includes(e.toLowerCase())?"The variable name is reserved and cannot be used.":!(e.includes(" ")||/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g.test(e))||"The variable name must not contain spaces or special characters.",j=[{label:"Edit",icon:(0,l.jsx)(i.A,{children:(0,l.jsx)(d.A,{})}),confirmText:"Update the custom variable '[RowKey]'?",hideBulk:!0,setDefaultValues:!0,fields:[{type:"textField",name:"RowKey",label:"Variable Name",placeholder:"Enter the key for the custom variable.",required:!0,validators:{validate:y}},{type:"textField",name:"Value",label:"Value",placeholder:"Enter the value for the custom variable.",required:!0}],type:"POST",url:"/api/ExecCippReplacemap",data:{Action:"!AddEdit",tenantId:t},relatedQueryKeys:["CustomVariables_".concat(t)]},{label:"Delete",icon:(0,l.jsx)(c.A,{}),confirmText:"Are you sure you want to delete [RowKey]?",type:"POST",url:"/api/ExecCippReplacemap",data:{Action:"Delete",RowKey:"RowKey",tenantId:t},relatedQueryKeys:["CustomVariables_".concat(t)],multiPost:!1}];return(0,l.jsxs)(r.A,{children:[(0,l.jsx)(s.A,{severity:"info",sx:{mb:2},children:"AllTenants"===t?"Global variables are key-value pairs that can be used to store additional information for All Tenants. These are applied to templates in standards using the format %variablename%. If a tenant has a custom variable with the same name, the tenant's variable will take precedence.":"Custom variables are key-value pairs that can be used to store additional information about a tenant. These are applied to templates in standards using the format %variablename%."}),(0,l.jsx)(m.x,{queryKey:"CustomVariables_".concat(t),title:"AllTenants"===t?"Global Variables":"Custom Variables",actions:j,api:{url:"/api/ExecCippReplacemap?Action=List&tenantId=".concat(t),dataKey:"Results"},simpleColumns:["RowKey","Value"],cardButton:(0,l.jsx)(o.A,{variant:"contained",color:"primary",size:"small",onClick:()=>{v(!0)},startIcon:(0,l.jsx)(i.A,{fontSize:"small",children:(0,l.jsx)(u.A,{})}),children:"Add Variable"})}),(0,l.jsx)(p.v,{apiObject:b}),(0,l.jsx)(h.B,{createDialog:{open:a,handleClose:()=>v(!1)},title:"Add Variable",fields:[{type:"textField",name:"RowKey",label:"Variable Name",placeholder:"Enter the name for the custom variable without %.",required:!0,validators:{validate:y}},{type:"textField",name:"Value",label:"Value",placeholder:"Enter the value for the custom variable.",required:!0}],api:{type:"POST",url:"/api/ExecCippReplacemap",data:{Action:"AddEdit",tenantId:t},relatedQueryKeys:["CustomVariables_".concat(t)]}})]})}},65868:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var l=a(14232);let n=l.forwardRef(function(e,t){let{title:a,titleId:n,...i}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),a?l.createElement("title",{id:n},a):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))})},68978:(e,t,a)=>{"use strict";a.d(t,{K:()=>i});var l=a(37876),n=a(67578);let i=e=>{let{children:t,value:a,index:i,...r}=e;return(0,l.jsx)("div",{role:"tabpanel",hidden:a!==i,id:"simple-tabpanel-".concat(i),"aria-labelledby":"simple-tab-".concat(i),...r,children:a===i&&(0,l.jsx)(n.A,{children:t})})}},76386:(e,t,a)=>{"use strict";a.d(t,{A:()=>u});var l=a(37876),n=a(24933),i=a(17675),r=a(47737),s=a(22322),o=a(68723),d=a(14232),c=a(88992);let u=e=>{let{children:t,queryKey:a,formControl:u,postUrl:m,customDataformatter:p,relatedQueryKeys:h,resetForm:x=!0}=e,v=(0,s.nN)({datafromUrl:!0,relatedQueryKeys:h}),{isValid:b}=(0,c.lN)({control:u.control});return(0,d.useEffect)(()=>{v.isSuccess&&x&&u.reset()},[v.isSuccess]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.A,{children:[t,(0,l.jsx)(o.v,{apiObject:v})]}),(0,l.jsx)(i.A,{sx:{justifyContent:"flex-end"},children:(0,l.jsx)(r.A,{disabled:v.isPending||!b,onClick:u.handleSubmit(()=>{if(!b)return;let e=u.getValues();p&&(e=p(e)),v.mutate({url:m,data:e,queryKey:a})}),type:"submit",variant:"contained",children:"Submit"})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,6593,8792],()=>t(12252)),_N_E=e.O()}]);