(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2061],{42120:(e,i,l)=>{"use strict";l.d(i,{A:()=>r});var t=l(93944),n=l(37876);let r=(0,t.A)((0,n.jsx)("path",{d:"m14 7-5 5 5 5z"}),"ArrowLeft")},86355:(e,i,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/tenant/administration/add-subscription",function(){return l(91700)}])},90240:(e,i,l)=>{"use strict";l.d(i,{A:()=>g});var t=l(37876),n=l(89099),r=l(67578),s=l(86650),a=l(22474),d=l(47737),o=l(94810),c=l(77018),u=l(54538),m=l(24933),p=l(17675),h=l(42120),v=l(22322),x=l(68723),j=l(14232),b=l(88992),y=l(2303);let g=e=>{let{title:i,backButtonTitle:l,titleButton:g,formPageType:A="Add",children:f,queryKey:C,formControl:k,postUrl:S,customDataformatter:w,resetForm:F=!1,hideBackButton:q=!1,hidePageType:_=!1,hideTitle:T=!1,hideSubmit:N=!1,allowResubmit:E=!1,addedButtons:P,...K}=e,z=(0,n.useRouter)(),U=(0,v.nN)({datafromUrl:!0,relatedQueryKeys:C}),{isValid:L,isDirty:O}=(0,b.lN)({control:k.control});return(0,j.useEffect)(()=>{if(delete z.query.tenantFilter,z.query){let e={...k.getValues(),...z.query};k.reset(e)}},[z]),(0,j.useEffect)(()=>{U.isSuccess&&F&&k.reset()},[U.isSuccess]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.v,{title:i}),(0,t.jsx)(r.A,{sx:{flexGrow:1,py:4},children:(0,t.jsx)(s.A,{maxWidth:"lg",children:(0,t.jsxs)(a.A,{spacing:4,children:[!T&&(0,t.jsxs)(a.A,{spacing:2,children:[!q&&(0,t.jsx)("div",{children:(0,t.jsx)(d.A,{color:"inherit",onClick:()=>{z.back()},startIcon:(0,t.jsx)(o.A,{fontSize:"small",children:(0,t.jsx)(h.A,{})}),children:l})}),(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsxs)(c.A,{variant:"h4",children:[!_&&(0,t.jsxs)(t.Fragment,{children:[A," - "]}),i]}),g&&g]})]}),(0,t.jsxs)(u.A,{children:[(0,t.jsxs)(m.A,{children:[f,(0,t.jsx)(x.v,{apiObject:U})]}),!N&&(0,t.jsx)(p.A,{sx:{justifyContent:"flex-end"},children:(0,t.jsxs)(a.A,{spacing:2,direction:"row",children:[P&&P,(0,t.jsx)(d.A,{disabled:U.isPending||!L||!E&&!O,onClick:k.handleSubmit(()=>{if(k.trigger(),!L)return;let e=w?w(k.getValues()):k.getValues();Object.keys(e).forEach(i=>{(""===e[i]||null===e[i])&&delete e[i]}),U.mutate({url:S,data:e})}),type:"submit",variant:"contained",children:"Submit"})]})})]})]})})})]})}},91700:(e,i,l)=>{"use strict";l.r(i),l.d(i,{default:()=>j});var t=l(37876),n=l(67578),r=l(90240),s=l(12435),a=l(88992),d=l(58105),o=l(17825),c=l(20035),u=l(54843),m=l(59568),p=l(5419),h=l(35936),v=l(41412);let x=()=>{var e,i,l,s,x;let j=(0,o.t)(),b=null==j?void 0:j.currentTenant,y=(0,a.mN)({mode:"onChange",defaultValues:{tenantFilter:b,action:"NewSub",iagree:!1}}),g=(0,a.FH)({control:y.control,name:"sku"});return(0,c.A)("div")(e=>{let{theme:i}=e;return{position:"sticky",top:"-8px",padding:"4px 10px",color:i.palette.primary.main,backgroundColor:(0,u.a)(i.palette.primary.light,.85),...i.applyStyles("dark",{backgroundColor:(0,u.e$)(i.palette.primary.main,.8)})}}),(0,c.A)("ul")({padding:0}),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(r.A,{queryKey:"CippFormPage",formControl:y,title:"Add Subscription",backButtonTitle:"CSP Licenses",postUrl:"/api/ExecCSPLicense",children:(0,t.jsx)(n.A,{sx:{my:2},children:(0,t.jsxs)(m.A,{container:!0,spacing:2,children:[(0,t.jsx)(m.A,{size:{xs:6},children:(0,t.jsx)(d.A,{type:"autoComplete",creatable:!1,label:"Available SKUs for ".concat(b),name:"sku",api:{queryKey:"SKU-".concat(b),url:"/api/ListCSPsku",labelField:e=>{var i;return"".concat(null==e?void 0:null===(i=e.name[0])||void 0===i?void 0:i.value," (").concat(null==e?void 0:e.sku,")")},valueField:"sku",addedField:{billingCycle:"billingCycle",commitmentTerm:"commitmentTerm",description:"description"}},multiple:!1,formControl:y,required:!0,validators:{validate:e=>null!=e&&!!e.value||"This field is required."},sortOptions:!0})}),(0,t.jsx)(m.A,{size:{xs:6},children:(0,t.jsx)(d.A,{type:"number",label:"Quantity of licenses to purchase.",name:"Quantity",formControl:y,validators:{required:"This field is required.",min:{value:1,message:"Minimum value is 1."}},required:!0})}),(null==g?void 0:g.value)&&(0,t.jsx)(m.A,{size:{xs:12},children:(0,t.jsx)(p.a,{title:"Selected SKU Details",variant:"outlined",showDivider:!1,propertyItems:[{label:"Name",value:null==g?void 0:g.label},{label:"Billing Cycle",value:(0,v.i)(null==g?void 0:null===(e=g.addedFields)||void 0===e?void 0:e.billingCycle)},{label:"Commitment Term",value:(0,v.i)(null==g?void 0:null===(i=g.addedFields)||void 0===i?void 0:i.commitmentTerm)},{label:"Description",value:(0,h.i)(null==g?void 0:null===(x=g.addedFields)||void 0===x?void 0:null===(s=x.description)||void 0===s?void 0:null===(l=s[0])||void 0===l?void 0:l.value,"htmlDescription")}]})}),(0,t.jsx)(m.A,{size:{xs:12},children:(0,t.jsx)(d.A,{type:"checkbox",label:"I understand that buy pressing submit this license will be purchased according to the terms and conditions for this SKU with Sherweb.",name:"iagree",formControl:y,validators:{required:"This field is required."}})})]})})})})};x.getLayout=e=>(0,t.jsx)(s.P,{children:e});let j=x}},e=>{var i=i=>e(e.s=i);e.O(0,[636,6593,8792],()=>i(86355)),_N_E=e.O()}]);