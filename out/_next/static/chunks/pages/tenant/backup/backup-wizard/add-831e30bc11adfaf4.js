(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7362],{17134:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/tenant/backup/backup-wizard/add",function(){return t(92602)}])},42120:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});var n=t(93944),i=t(37876);let r=(0,n.A)((0,i.jsx)("path",{d:"m14 7-5 5 5 5z"}),"ArrowLeft")},90240:(e,s,t)=>{"use strict";t.d(s,{A:()=>b});var n=t(37876),i=t(89099),r=t(67578),l=t(86650),a=t(22474),c=t(47737),o=t(94810),d=t(77018),u=t(54538),h=t(24933),x=t(17675),m=t(42120),p=t(22322),A=t(68723),j=t(14232),f=t(88992),C=t(2303);let b=e=>{let{title:s,backButtonTitle:t,titleButton:b,formPageType:y="Add",children:g,queryKey:k,formControl:w,postUrl:z,customDataformatter:P,resetForm:v=!1,hideBackButton:S=!1,hidePageType:I=!1,hideTitle:T=!1,hideSubmit:_=!1,allowResubmit:N=!1,addedButtons:B,...E}=e,F=(0,i.useRouter)(),q=(0,p.nN)({datafromUrl:!0,relatedQueryKeys:k}),{isValid:V,isDirty:W}=(0,f.lN)({control:w.control});return(0,j.useEffect)(()=>{if(delete F.query.tenantFilter,F.query){let e={...w.getValues(),...F.query};w.reset(e)}},[F]),(0,j.useEffect)(()=>{q.isSuccess&&v&&w.reset()},[q.isSuccess]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.v,{title:s}),(0,n.jsx)(r.A,{sx:{flexGrow:1,py:4},children:(0,n.jsx)(l.A,{maxWidth:"lg",children:(0,n.jsxs)(a.A,{spacing:4,children:[!T&&(0,n.jsxs)(a.A,{spacing:2,children:[!S&&(0,n.jsx)("div",{children:(0,n.jsx)(c.A,{color:"inherit",onClick:()=>{F.back()},startIcon:(0,n.jsx)(o.A,{fontSize:"small",children:(0,n.jsx)(m.A,{})}),children:t})}),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsxs)(d.A,{variant:"h4",children:[!I&&(0,n.jsxs)(n.Fragment,{children:[y," - "]}),s]}),b&&b]})]}),(0,n.jsxs)(u.A,{children:[(0,n.jsxs)(h.A,{children:[g,(0,n.jsx)(A.v,{apiObject:q})]}),!_&&(0,n.jsx)(x.A,{sx:{justifyContent:"flex-end"},children:(0,n.jsxs)(a.A,{spacing:2,direction:"row",children:[B&&B,(0,n.jsx)(c.A,{disabled:q.isPending||!V||!N&&!W,onClick:w.handleSubmit(()=>{if(w.trigger(),!V)return;let e=P?P(w.getValues()):w.getValues();Object.keys(e).forEach(s=>{(""===e[s]||null===e[s])&&delete e[s]}),q.mutate({url:z,data:e})}),type:"submit",variant:"contained",children:"Submit"})]})})]})]})})})]})}},92602:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var n=t(37876);t(14232);var i=t(77018),r=t(59568),l=t(88992),a=t(74023),c=t.n(a),o=t(12435),d=t(90240),u=t(58105),h=t(17825),x=t(35764);let m=()=>{let e=(0,h.t)().currentTenant||"",s=(0,l.mN)({mode:"onChange",defaultValues:{tenantFilter:e,users:!0,groups:!0,ca:!0,intuneconfig:!0,intunecompliance:!0,intuneprotection:!0,antispam:!0,antiphishing:!0,CippWebhookAlerts:!0,CippScriptedAlerts:!0}});return(0,n.jsxs)(d.A,{title:"Backup Schedule",formControl:s,queryKey:"Backup Tasks",postUrl:"/api/AddScheduledItem?hidden=true&DisallowDuplicateName=true",customDataformatter:s=>{let t=new Date;t.setHours(0,0,0,0);let n=Math.floor(t.getTime()/1e3)-45,i=s.tenantFilter||e;return{TenantFilter:i,Name:"CIPP Backup - ".concat(i),Command:{value:"New-CIPPBackup"},Parameters:{backupType:"Scheduled",ScheduledBackupValues:{...c()(s,["tenantFilter"])}},ScheduledTime:n,Recurrence:{value:"1d"}}},backButtonTitle:"Backup Tasks",allowResubmit:!0,children:[(0,n.jsx)(i.A,{variant:"body1",children:"Backups are stored in CIPP's storage and can be restored using the CIPP Restore Backup Wizard. Backups run daily or on demand by clicking the backup now button."}),(0,n.jsxs)(r.A,{container:!0,spacing:2,sx:{my:2},children:[(0,n.jsx)(r.A,{size:{xs:12},children:(0,n.jsx)(x.w,{formControl:s,allTenants:!0,name:"tenantFilter",required:!0,disableClearable:!0,componentType:"select"})}),(0,n.jsx)(r.A,{size:{xs:12},children:(0,n.jsx)(i.A,{variant:"h6",children:"Identity"})}),(0,n.jsx)(r.A,{size:{md:6,xs:12},children:(0,n.jsx)(u.A,{type:"switch",label:"User List",name:"users",formControl:s})}),(0,n.jsx)(r.A,{size:{md:6,xs:12},children:(0,n.jsx)(u.A,{type:"switch",label:"Groups",name:"groups",formControl:s})}),(0,n.jsx)(r.A,{size:{xs:12},children:(0,n.jsx)(i.A,{variant:"h6",children:"Conditional Access"})}),(0,n.jsx)(r.A,{size:{md:6,xs:12},children:(0,n.jsx)(u.A,{type:"switch",label:"Conditional Access Configuration",name:"ca",formControl:s})}),(0,n.jsx)(r.A,{size:{md:6,xs:12}}),(0,n.jsx)(r.A,{size:{xs:12},children:(0,n.jsx)(i.A,{variant:"h6",children:"Intune"})}),(0,n.jsx)(r.A,{size:{md:6,xs:12},children:(0,n.jsx)(u.A,{type:"switch",label:"Intune Configuration Policies",name:"intuneconfig",formControl:s})}),(0,n.jsx)(r.A,{size:{md:6,xs:12},children:(0,n.jsx)(u.A,{type:"switch",label:"Intune Compliance Policies",name:"intunecompliance",formControl:s})}),(0,n.jsx)(r.A,{size:{md:6,xs:12},children:(0,n.jsx)(u.A,{type:"switch",label:"Intune Protection Policies",name:"intuneprotection",formControl:s})}),(0,n.jsx)(r.A,{size:{md:6,xs:12}}),(0,n.jsx)(r.A,{size:{xs:12},children:(0,n.jsx)(i.A,{variant:"h6",children:"Email Security"})}),(0,n.jsx)(r.A,{size:{md:6,xs:12},children:(0,n.jsx)(u.A,{type:"switch",label:"Anti-Spam Policies",name:"antispam",formControl:s})}),(0,n.jsx)(r.A,{size:{md:6,xs:12},children:(0,n.jsx)(u.A,{type:"switch",label:"Anti-Phishing Policies",name:"antiphishing",formControl:s})}),(0,n.jsx)(r.A,{size:{xs:12},children:(0,n.jsx)(i.A,{variant:"h6",children:"CIPP"})}),(0,n.jsx)(r.A,{size:{md:6,xs:12},children:(0,n.jsx)(u.A,{type:"switch",label:"Webhook Alerts Configuration",name:"CippWebhookAlerts",formControl:s})}),(0,n.jsx)(r.A,{size:{md:6,xs:12},children:(0,n.jsx)(u.A,{type:"switch",label:"Scripted Alerts Configuration",name:"CippScriptedAlerts",formControl:s})}),(0,n.jsx)(r.A,{size:{md:6,xs:12}})]})]})};m.getLayout=e=>(0,n.jsx)(o.P,{children:e});let p=m}},e=>{var s=s=>e(e.s=s);e.O(0,[636,6593,8792],()=>s(17134)),_N_E=e.O()}]);