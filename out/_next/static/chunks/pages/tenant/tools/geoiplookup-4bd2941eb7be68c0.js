(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6227],{59609:(e,t,i)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/tenant/tools/geoiplookup",function(){return i(74524)}])},74524:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>k});var s=i(37876),r=i(67578),n=i(86650),o=i(47737),l=i(59568),a=i(82179),d=i(12435),c=i(88992),u=i(84064),h=i(95339),p=i(60455),x=i(16652),A=i(58105),m=i(22322),j=i(66113),P=i(31540),y=i(17825),w=i(68723),g=i(82557),I=i(14232);let v=I.forwardRef(function(e,t){let{title:i,titleId:s,...r}=e;return I.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),i?I.createElement("title",{id:s},i):null,I.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),I.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}),f=()=>{let e=(0,y.t)().currentTenant,t=(0,c.mN)({mode:"onBlur"}),i=(0,c.FH)({control:t.control,name:"ipAddress"}),[d,f]=(0,I.useState)(null),k=[{label:"View Location",customFunction:e=>f(e.RowKey),noConfirm:!0,icon:(0,s.jsx)(v,{}),hideBulk:!0},{label:"Add to Whitelist",url:"/api/ExecAddTrustedIP",type:"POST",data:{IP:"RowKey",State:"!Trusted"},icon:(0,s.jsx)(h.A,{}),confirmText:"Are you sure you want to add this IP to the whitelist?",multiPost:!1,condition:e=>"Trusted"!==e.state},{label:"Remove from Whitelist",url:"/api/ExecAddTrustedIP",type:"POST",data:{IP:"RowKey",State:"!NotTrusted"},icon:(0,s.jsx)(p.A,{}),confirmText:"Are you sure you want to remove this IP from the whitelist?",multiPost:!1,condition:e=>"NotTrusted"!==e.state}],b=(0,m.nN)({relatedQueryKeys:["geoiplookup-".concat(i),"ListIPWhitelist"]});return(0,s.jsx)(r.A,{sx:{flexGrow:1,py:4},children:(0,s.jsx)(n.A,{maxWidth:!1,children:(0,s.jsxs)(l.A,{container:!0,spacing:1,children:[(0,s.jsx)(l.A,{size:{xs:4},children:(0,s.jsx)(u.A,{title:"Geo IP Check",cardSx:{display:"flex",flexDirection:"column",height:"100%"},children:(0,s.jsxs)(l.A,{container:!0,spacing:2,children:[(0,s.jsx)(l.A,{size:8,children:(0,s.jsx)(A.A,{formControl:t,name:"ipAddress",type:"textField",validators:{validate:e=>(0,j.n)(e,"ip")},placeholder:"Enter IP Address",required:!0})}),(0,s.jsx)(l.A,{size:4,children:(0,s.jsx)(o.A,{type:"submit",onClick:()=>f(i),variant:"contained",startIcon:(0,s.jsx)(x.A,{}),children:"Check"})})]})})}),(0,s.jsx)(l.A,{size:8}),d&&(0,s.jsx)(l.A,{size:6,children:(0,s.jsxs)(u.A,{title:"Geo IP Results",children:[(0,s.jsx)(l.A,{container:!0,spacing:2,children:(0,s.jsx)(l.A,{size:12,children:(0,s.jsx)(g.A,{ipAddress:d})})}),(0,s.jsx)(l.A,{container:!0,spacing:2,mt:2,children:(0,s.jsx)(l.A,{size:12,children:(0,s.jsxs)(a.A,{direction:"row",spacing:1,children:[(0,s.jsx)(o.A,{variant:"contained",color:"primary",onClick:()=>{b.mutate({url:"/api/ExecAddTrustedIP",data:{IP:i,State:"Trusted",tenantFilter:e}})},children:"Add to Whitelist"}),(0,s.jsx)(o.A,{variant:"outlined",color:"error",onClick:()=>{b.mutate({url:"/api/ExecAddTrustedIP",data:{IP:i,State:"NotTrusted",tenantFilter:e}})},children:"Remove from Whitelist"})]})})})]})}),(0,s.jsxs)(l.A,{size:6,children:[(0,s.jsx)(P.x,{title:"IP Whitelist",api:{url:"/api/ListIPWhitelist"},queryKey:"ListIPWhitelist",simpleColumns:["PartitionKey","state","RowKey"],actions:k}),(0,s.jsx)(w.v,{apiObject:b})]})]})})})};f.getLayout=e=>(0,s.jsx)(d.P,{children:e});let k=f},82557:(e,t,i)=>{"use strict";i.d(t,{A:()=>x});var s=i(37876),r=i(14232),n=i(76776),o=i(59568),l=i(18847),a=i.n(l),d=i(22322),c=i(33862),u=i(41412),h=i(35936);let p=a()(()=>Promise.all([i.e(789),i.e(1805),i.e(8402),i.e(5389)]).then(i.bind(i,35389)),{loadableGenerated:{webpack:()=>[35389]},ssr:!1});function x(e){let{ipAddress:t,cardProps:i,showIpAddress:l=!1,displayIpAddress:a=null}=e,[x,A]=(0,r.useState)(null),m=["timezone","as","proxy","hosting","mobile"],j=["org","city","region","country","zip"],P=a||t,y=(l?["ipAddress",...j]:j).map(e=>({label:(0,u.i)("ipAddress"===e?"IP Address":e),value:"ipAddress"===e?P:""})),[w,g]=(0,r.useState)(y),[I,v]=(0,r.useState)(null),f=(0,d.nN)({urlFromData:!0,queryKey:"GeoIPLookup-"+t,onResult:e=>{A(e);var t=[];l&&t.push({label:(0,u.i)("IP Address"),value:(0,h.i)(P,"ipAddress")}),j.map(i=>{t.push({label:(0,u.i)(i),value:(0,h.i)(e[i],i)})}),g(t),v((0,s.jsx)("div",{children:m.map(t=>(0,s.jsxs)("div",{children:[(0,s.jsxs)("strong",{children:[(0,u.i)(t),":"]})," ",(0,h.i)(e[t],t)]},t))}))}});return(0,r.useEffect)(()=>{t&&f.mutate({url:"/api/ExecGeoIPLookup",data:{IP:t}})},[t]),(0,s.jsxs)(o.A,{container:!0,spacing:2,children:[(0,s.jsx)(o.A,{size:{xs:12,sm:8},children:f.isPending?(0,s.jsx)(n.A,{variant:"rectangular",height:400}):(0,s.jsx)(s.Fragment,{children:x&&x.lat&&x.lon&&(0,s.jsx)(p,{markers:[{position:[x.lat,x.lon],popup:I}],zoom:11,mapSx:{height:"400px",width:"100%"}})})}),(0,s.jsx)(o.A,{size:{xs:12,sm:4},children:(0,s.jsx)(c.E,{propertyItems:w,showDivider:!1,isFetching:f.isPending})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,6593,8792],()=>t(59609)),_N_E=e.O()}]);