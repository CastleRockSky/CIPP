(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6128],{607:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(14232);let i=s.forwardRef(function(e,t){let{title:a,titleId:i,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},n),a?s.createElement("title",{id:i},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))})},35844:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(93944),i=a(37876);let n=(0,s.A)((0,i.jsx)("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"}),"Done")},77071:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var s=a(37876),i=a(12435),n=a(29390),l=a(14232),r=a(76776),u=a(5596),d=a(47866),o=a(70946),c=a(3034),m=a(77018),p=a(7957),x=a(35844),h=a(71609);let g=(0,a(93944).A)((0,s.jsx)("path",{d:"m18 7-1.41-1.41-6.34 6.34 1.41 1.41zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12zM.41 13.41 6 19l1.41-1.41L1.83 12z"}),"DoneAll");var y=a(48504),A=a(53311),S=a(22322),j=a(17825),E=a(22875),f=a(607),v=a(31540);let R=["ReceivedTime","ReleaseStatus","Subject","SenderAddress","RecipientAddress","Type","PolicyName","Tenant"],M=["Received","Status","SenderAddress","RecipientAddress"],T=()=>{let e=(0,j.t)().currentTenant,[t,a]=(0,l.useState)(!1),[i,T]=(0,l.useState)(null),[w,b]=(0,l.useState)(null),[L,D]=(0,l.useState)(!1),[I,C]=(0,l.useState)([]),[N,_]=(0,l.useState)(null),[k,F]=(0,l.useState)(null),[P,Q]=(0,l.useState)(!1),O=(0,S.R_)({url:"/api/ListMailQuarantineMessage",data:{tenantFilter:e,Identity:w},waiting:P,queryKey:"ListMailQuarantineMessage-".concat(w)}),q=(0,S.nN)({urlFromData:!0,queryKey:"MessageTraceDetail-".concat(N),onResult:e=>{C(e)}});(0,l.useEffect)(()=>{if(O.isSuccess){var e;T((0,s.jsx)(A.q,{emailSource:null==O?void 0:null===(e=O.data)||void 0===e?void 0:e.Message}))}else T((0,s.jsx)(r.A,{variant:"rectangular",height:400}))},[O.isSuccess,O.data]);let z=[{label:"View Message",noConfirm:!0,customFunction:e=>{b(e.Identity),P||Q(!0),O.refetch(),a(!0)},icon:(0,s.jsx)(E.A,{})},{label:"View Message Trace",noConfirm:!0,customFunction:t=>{_(t.MessageId),q.mutate({url:"/api/ListMessageTrace",data:{tenantFilter:e,messageId:t.MessageId}}),F(t.Subject),D(!0)},icon:(0,s.jsx)(f.A,{})},{label:"Release",type:"POST",url:"/api/ExecQuarantineManagement",multiPost:!0,data:{Identity:"Identity",Type:"!Release"},confirmText:"Are you sure you want to release this message?",icon:(0,s.jsx)(x.A,{}),condition:e=>"RELEASED"!==e.ReleaseStatus},{label:"Deny",type:"POST",url:"/api/ExecQuarantineManagement",data:{Identity:"Identity",Type:"!Deny"},confirmText:"Are you sure you want to deny this message?",icon:(0,s.jsx)(h.A,{}),condition:e=>"DENIED"!==e.ReleaseStatus},{label:"Release & Allow Sender",type:"POST",url:"/api/ExecQuarantineManagement",data:{Identity:"Identity",Type:"!Release",AllowSender:!0},confirmText:"Are you sure you want to release this email and add the sender to the whitelist?",icon:(0,s.jsx)(g,{}),condition:e=>"RELEASED"!==e.ReleaseStatus}];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.a,{title:"Quarantine Management",apiUrl:"/api/ListMailQuarantine",apiDataKey:"Results",actions:z,offCanvas:{extendedInfoFields:["MessageId","RecipientAddress","Type"],actions:z},simpleColumns:R,filters:[{filterName:"Not Released",value:[{id:"ReleaseStatus",value:"NOTRELEASED"}],type:"column"},{filterName:"Released",value:[{id:"ReleaseStatus",value:"RELEASED"}],type:"column"},{filterName:"Requested",value:[{id:"ReleaseStatus",value:"REQUESTED"}],type:"column"}]}),(0,s.jsxs)(u.A,{open:t,onClose:()=>a(!1),maxWidth:"lg",fullWidth:!0,children:[(0,s.jsxs)(d.A,{sx:{py:2},children:["Quarantine Message",(0,s.jsx)(o.A,{"aria-label":"close",onClick:()=>a(!1),sx:{position:"absolute",right:8,top:8},children:(0,s.jsx)(y.A,{})})]}),(0,s.jsx)(c.A,{dividers:!0,children:i})]}),(0,s.jsxs)(u.A,{open:L,onClose:()=>D(!1),maxWidth:"lg",fullWidth:!0,children:[(0,s.jsxs)(d.A,{sx:{py:2},children:["Message Trace - ",k,(0,s.jsx)(o.A,{"aria-label":"close",onClick:()=>D(!1),sx:{position:"absolute",right:8,top:8},children:(0,s.jsx)(y.A,{})})]}),(0,s.jsxs)(c.A,{dividers:!0,children:[q.isPending&&(0,s.jsxs)(m.A,{variant:"body1",sx:{py:4},children:[(0,s.jsx)(p.A,{size:20,color:"inherit",sx:{mr:1}})," Loading message trace details..."]}),q.isSuccess&&(0,s.jsx)(v.x,{noCard:!0,title:"Message Trace Details",simpleColumns:M,data:null!=I?I:[],refreshFunction:()=>q.mutate({url:"/api/ListMessageTrace",data:{tenantFilter:e,messageId:N}}),isFetching:q.isPending})]})]})]})};T.getLayout=e=>(0,s.jsx)(i.P,{children:e});let w=T},87759:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/email/administration/quarantine",function(){return a(77071)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[1382,8520,2188,3624,636,6593,8792],()=>t(87759)),_N_E=e.O()}]);