(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4091],{17080:(e,t,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/email/transport/list-rules/add",function(){return l(50635)}])},42120:(e,t,l)=>{"use strict";l.d(t,{A:()=>n});var s=l(93944),r=l(37876);let n=(0,s.A)((0,r.jsx)("path",{d:"m14 7-5 5 5 5z"}),"ArrowLeft")},50635:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>p});var s=l(37876),r=l(14232),n=l(71538),a=l(59568),i=l(88992),d=l(12435),o=l(90240),c=l(58105),u=l(35764);let m=()=>{let e=(0,i.mN)({mode:"onChange",defaultValues:{selectedTenants:[],TemplateList:null,PowerShellCommand:""}}),t=(0,i.FH)({control:e.control,name:"TemplateList"});return(0,r.useEffect)(()=>{(null==t?void 0:t.value)&&e.setValue("PowerShellCommand",JSON.stringify(null==t?void 0:t.value))},[t,e]),(0,s.jsx)(o.A,{formControl:e,queryKey:"AddTransportRule",title:"Add Transport Rule",backButtonTitle:"Transport Rules Overview",postUrl:"/api/AddTransportRule",children:(0,s.jsxs)(a.A,{container:!0,spacing:2,children:[(0,s.jsx)(a.A,{size:{xs:12},children:(0,s.jsx)(u.w,{label:"Select Tenants",formControl:e,name:"selectedTenants",type:"multiple",allTenants:!0,preselectedEnabled:!0,validators:{required:"At least one tenant must be selected"}})}),(0,s.jsx)(n.A,{sx:{my:2,width:"100%"}}),(0,s.jsx)(a.A,{size:{md:12,xs:12},children:(0,s.jsx)(c.A,{type:"autoComplete",label:"Select a template (optional)",name:"TemplateList",formControl:e,multiple:!1,api:{queryKey:"TemplateListTransport",labelField:"name",valueField:e=>e,url:"/api/ListTransportRulesTemplates"},placeholder:"Select a template or enter PowerShell JSON manually"})}),(0,s.jsx)(n.A,{sx:{my:2,width:"100%"}}),(0,s.jsx)(a.A,{size:{xs:12},children:(0,s.jsx)(c.A,{type:"textField",label:"New-TransportRule parameters (JSON)",name:"PowerShellCommand",formControl:e,multiline:!0,rows:6,validators:{required:"Please enter the PowerShell parameters as JSON."}})})]})})};m.getLayout=e=>(0,s.jsx)(d.P,{children:e});let p=m},90240:(e,t,l)=>{"use strict";l.d(t,{A:()=>w});var s=l(37876),r=l(89099),n=l(67578),a=l(86650),i=l(22474),d=l(47737),o=l(94810),c=l(77018),u=l(54538),m=l(24933),p=l(17675),x=l(42120),h=l(22322),j=l(68723),A=l(14232),f=l(88992),y=l(2303);let w=e=>{let{title:t,backButtonTitle:l,titleButton:w,formPageType:v="Add",children:T,queryKey:b,formControl:g,postUrl:S,customDataformatter:C,resetForm:N=!1,hideBackButton:_=!1,hidePageType:E=!1,hideTitle:P=!1,hideSubmit:k=!1,allowResubmit:O=!1,addedButtons:q,...F}=e,L=(0,r.useRouter)(),R=(0,h.nN)({datafromUrl:!0,relatedQueryKeys:b}),{isValid:z,isDirty:V}=(0,f.lN)({control:g.control});return(0,A.useEffect)(()=>{if(delete L.query.tenantFilter,L.query){let e={...g.getValues(),...L.query};g.reset(e)}},[L]),(0,A.useEffect)(()=>{R.isSuccess&&N&&g.reset()},[R.isSuccess]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y.v,{title:t}),(0,s.jsx)(n.A,{sx:{flexGrow:1,py:4},children:(0,s.jsx)(a.A,{maxWidth:"lg",children:(0,s.jsxs)(i.A,{spacing:4,children:[!P&&(0,s.jsxs)(i.A,{spacing:2,children:[!_&&(0,s.jsx)("div",{children:(0,s.jsx)(d.A,{color:"inherit",onClick:()=>{L.back()},startIcon:(0,s.jsx)(o.A,{fontSize:"small",children:(0,s.jsx)(x.A,{})}),children:l})}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,s.jsxs)(c.A,{variant:"h4",children:[!E&&(0,s.jsxs)(s.Fragment,{children:[v," - "]}),t]}),w&&w]})]}),(0,s.jsxs)(u.A,{children:[(0,s.jsxs)(m.A,{children:[T,(0,s.jsx)(j.v,{apiObject:R})]}),!k&&(0,s.jsx)(p.A,{sx:{justifyContent:"flex-end"},children:(0,s.jsxs)(i.A,{spacing:2,direction:"row",children:[q&&q,(0,s.jsx)(d.A,{disabled:R.isPending||!z||!O&&!V,onClick:g.handleSubmit(()=>{if(g.trigger(),!z)return;let e=C?C(g.getValues()):g.getValues();Object.keys(e).forEach(t=>{(""===e[t]||null===e[t])&&delete e[t]}),R.mutate({url:S,data:e})}),type:"submit",variant:"contained",children:"Submit"})]})})]})]})})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,6593,8792],()=>t(17080)),_N_E=e.O()}]);