(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6550],{6312:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>C});var r=a(37876),l=a(12435),s=a(88992),n=a(22322),i=a(89099),o=a(24933),c=a(67578),d=a(22474),p=a(77018),h=a(71538),u=a(70946),x=a(47737),m=a(17675),v=a(11648),A=a(32591),j=a(36577),b=a(68723),g=a(58105);let y=[{value:"user",label:"User"},{value:"group",label:"Group"},{value:"administrativeUnit",label:"Administrative Unit"},{value:"contact",label:"Contact"},{value:"device",label:"Device"},{value:"event",label:"Event (User and Group Calendars)"},{value:"message",label:"Message"},{value:"organization",label:"Organization"},{value:"post",label:"Post"}],f=()=>{let e=(0,i.useRouter)(),t=(0,s.mN)({mode:"onChange",defaultValues:{properties:[],status:"InDevelopment"}}),a=(0,s.lN)({control:t.control}),l=(0,n.nN)({urlFromData:!0,relatedQueryKeys:["SchemaExtensionsListPage"]}),f=(0,s.FH)({control:t.control,name:"properties"}),C=e=>{let a=f.filter((t,a)=>a!==e);t.setValue("properties",a)},S=(e,a,r)=>{let l=f.map((t,l)=>l===e?{...t,[a]:r}:t);t.setValue("properties",l)},E=[{name:"id",label:"Schema ID",type:"textField",required:!0,placeholder:"Enter a schema id (e.g. cippUser). The prefix is generated automatically after creation."},{name:"description",label:"Description",type:"textField",required:!0,placeholder:"Enter a description for the schema extension"},{name:"status",label:"Status",type:"select",required:!0,placeholder:"Select a status for the schema extensions (e.g. InDevelopment, Available)",options:[{value:"InDevelopment",label:"In Development"},{value:"Available",label:"Available"}],creatable:!1},{name:"targetTypes",label:"Target Types",type:"autoComplete",placeholder:"Select the directory object target types for the schema extension",required:!0,multiple:!0,options:y,creatable:!1,validate:e=>e.length>0||"Please select at least one target type."}],T=[{value:"Binary",label:"Binary (256 bytes max)"},{value:"Boolean",label:"Boolean"},{value:"DateTime",label:"DateTime (ISO 8601, UTC)"},{value:"Integer",label:"Integer (32-bit)"},{value:"String",label:"String (256 characters max)"}];return(0,r.jsxs)(j.A,{title:"Add Schema Extension",backButtonTitle:"Schema Extensions",noTenantInHead:!0,children:[(0,r.jsxs)(o.A,{children:[(0,r.jsx)(c.A,{sx:{width:"100%"},children:(0,r.jsx)(d.A,{spacing:2,children:(0,r.jsx)(c.A,{children:(0,r.jsxs)(d.A,{spacing:1,children:[(0,r.jsx)(p.A,{variant:"h6",children:"Schema Details"}),(0,r.jsx)(h.A,{}),E.map((e,a)=>(0,r.jsx)(g.A,{...e,formControl:t},a)),(0,r.jsx)(p.A,{variant:"h6",children:"Properties"}),(0,r.jsx)(h.A,{}),f&&f.map((e,a)=>(0,r.jsxs)(d.A,{direction:"row",spacing:1,alignItems:"center",children:[(0,r.jsx)(c.A,{sx:{width:"300px"},children:(0,r.jsx)(g.A,{type:"textField",name:"properties[".concat(a,"].name"),formControl:t,label:"Property Name",value:e.name,onChange:e=>S(a,"name",e.target.value),required:!0})}),(0,r.jsx)(c.A,{sx:{width:"300px"},children:(0,r.jsx)(g.A,{type:"select",name:"properties[".concat(a,"].type"),formControl:t,label:"Property Type",value:e.type,onChange:e=>S(a,"type",e.target.value),options:T,required:!0,validate:e=>!!e||"Please select a property type."})}),(0,r.jsx)(u.A,{onClick:()=>C(a),children:(0,r.jsx)(v.A,{})})]},a)),(0,r.jsxs)(c.A,{children:[(0,r.jsx)(x.A,{onClick:()=>{t.setValue("properties",[...f,{name:"",type:null}]),t.formState.errors.properties&&t.clearErrors("properties")},startIcon:(0,r.jsx)(A.A,{}),children:"Add Property"}),t.formState.errors.properties&&(0,r.jsx)(p.A,{color:"error",variant:"body2",children:t.formState.errors.properties.message})]})]})})})}),(0,r.jsx)(b.v,{apiObject:l})]}),(0,r.jsx)(m.A,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,r.jsxs)(d.A,{direction:"row",spacing:2,children:[(0,r.jsx)(x.A,{variant:"outlined",onClick:()=>e.back(),children:"Cancel"}),(0,r.jsx)(x.A,{variant:"contained",color:"primary",onClick:t.handleSubmit(e=>{if(!e.properties||0===e.properties.length){t.setError("properties",{type:"manual",message:"At least one property must be added."});return}l.mutate({url:"/api/ExecCustomData",data:{Action:"AddSchemaExtension",schemaExtension:{id:e.id,description:e.description,targetTypes:e.targetTypes.map(e=>e.value),status:e.status,properties:e.properties}}})}),disabled:l.isPending||!a.isValid,children:"Add Schema Extension"})]})})]})};f.getLayout=e=>(0,r.jsx)(l.P,{children:e});let C=f},11648:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(93944),l=a(37876);let s=(0,r.A)((0,l.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m5 11H7v-2h10z"}),"RemoveCircle")},30748:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/cipp/custom-data/schema-extensions/add",function(){return a(6312)}])},32591:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(93944),l=a(37876);let s=(0,r.A)((0,l.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m5 11h-4v4h-2v-4H7v-2h4V7h2v4h4z"}),"AddCircle")},36577:(e,t,a)=>{"use strict";a.d(t,{A:()=>x});var r=a(37876),l=a(89099),s=a(67578),n=a(86650),i=a(22474),o=a(47737),c=a(94810),d=a(77018),p=a(54538),h=a(42120),u=a(2303);let x=e=>{let{title:t,backButtonTitle:a="Back",children:x,cardSize:m="xl",hideTitleText:v=!1,hideBackButton:A=!1,noTenantInHead:j=!1,infoBar:b}=e,g=(0,l.useRouter)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.v,{title:t,noTenant:j}),(0,r.jsx)(s.A,{sx:{flexGrow:1,py:4},children:(0,r.jsx)(n.A,{maxWidth:m,children:(0,r.jsxs)(i.A,{spacing:2,children:[(0,r.jsxs)(i.A,{spacing:2,children:[(0,r.jsx)("div",{children:!A&&(0,r.jsx)(o.A,{color:"inherit",onClick:()=>{g.back()},startIcon:(0,r.jsx)(c.A,{fontSize:"small",children:(0,r.jsx)(h.A,{})}),children:a})}),!0!==v&&(0,r.jsx)("div",{children:(0,r.jsx)(d.A,{variant:"h4",children:t})})]}),b,(0,r.jsx)(p.A,{children:x})]})})})]})}},42120:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(93944),l=a(37876);let s=(0,r.A)((0,l.jsx)("path",{d:"m14 7-5 5 5 5z"}),"ArrowLeft")}},e=>{var t=t=>e(e.s=t);e.O(0,[636,6593,8792],()=>t(30748)),_N_E=e.O()}]);