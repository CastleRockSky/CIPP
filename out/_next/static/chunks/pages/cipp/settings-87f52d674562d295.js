(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8496],{17055:(e,i,t)=>{"use strict";t.d(i,{L:()=>c});var s=t(37876),l=t(14e3),a=t(67578),n=t(22474),o=t(8578),r=t(76626),d=t(71538);let c=e=>{let{tabOptions:i,children:t}=e,c=(0,l.useRouter)(),u=(0,l.usePathname)(),x=i.find(e=>e.path===u);return(0,s.jsxs)(a.A,{sx:{flexGrow:1,py:4},children:[(0,s.jsx)(n.A,{spacing:2,children:(0,s.jsxs)("div",{children:[(0,s.jsx)(o.A,{onChange:(e,i)=>{c.push(i)},value:null==x?void 0:x.path,variant:"scrollable",children:i.map(e=>(0,s.jsx)(r.A,{label:e.label,value:e.path},e.path))}),(0,s.jsx)(d.A,{})]})}),t]})}},37035:e=>{"use strict";e.exports=JSON.parse('[{"label":"General","path":"/cipp/settings"},{"label":"Permissions","path":"/cipp/settings/permissions"},{"label":"Tenants","path":"/cipp/settings/tenants"},{"label":"Backend","path":"/cipp/settings/backend"},{"label":"Notifications","path":"/cipp/settings/notifications"},{"label":"Partner Webhooks","path":"/cipp/settings/partner-webhooks"},{"label":"Licenses","path":"/cipp/settings/licenses"},{"label":"Global Variables","path":"/cipp/settings/global-variables"}]')},58263:(e,i,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/cipp/settings",function(){return t(58477)}])},58477:(e,i,t)=>{"use strict";t.r(i),t.d(i,{default:()=>K});var s=t(37876),l=t(86650),a=t(59568),n=t(17055),o=t(12435),r=t(37035),d=t(67578),c=t(94810),u=t(47737),x=t(5419),h=t(14304),p=t(14628),g=t(96227),m=t(22322),v=t(14232);let j=()=>{var e,i,t,l,a,n,o;let r=(0,m.R_)({url:"/version.json",queryKey:"LocalVersion"}),j=(0,m.R_)({url:"/api/GetVersion?LocalVersion=".concat(null==r?void 0:null===(e=r.data)||void 0===e?void 0:e.version),queryKey:"CippVersion",waiting:!1});(0,v.useEffect)(()=>{r.isFetched&&!j.isFetched&&(j.waiting=!0,j.refetch())},[r,j]);let y=(e,i,t)=>(0,s.jsxs)(d.A,{children:[(0,s.jsx)(c.A,{fontSize:"inherit",style:{marginRight:3},children:!0===t?(0,s.jsx)(h.A,{color:"warning"}):(0,s.jsx)(p.A,{color:"success"})}),(0,s.jsxs)("span",{style:{marginRight:10},children:["v",e]})," ",!0===t?"(v".concat(i," is available)"):""]});return(0,s.jsx)(x.a,{showDivider:!1,cardButton:(0,s.jsxs)(u.A,{variant:"contained",color:"primary",size:"small",onClick:()=>{r.refetch(),j.refetch()},children:[(0,s.jsx)(c.A,{fontSize:"small",style:{marginRight:4},children:(0,s.jsx)(g.A,{})}),"Check For Updates"]}),title:"Version",isFetching:j.isFetching,cardSx:{display:"flex",flexDirection:"column",height:"100%",width:"100%"},propertyItems:[{label:"Frontend",value:y(null==r?void 0:null===(i=r.data)||void 0===i?void 0:i.version,null==j?void 0:null===(t=j.data)||void 0===t?void 0:t.RemoteCIPPVersion,null==j?void 0:null===(l=j.data)||void 0===l?void 0:l.OutOfDateCIPP)},{label:"Backend",value:y(null==j?void 0:null===(a=j.data)||void 0===a?void 0:a.LocalCIPPAPIVersion,null==j?void 0:null===(n=j.data)||void 0===n?void 0:n.RemoteCIPPAPIVersion,null==j?void 0:null===(o=j.data)||void 0===o?void 0:o.OutOfDateCIPPAPI)}]})};var y=t(66741),b=t(77018),f=t(84064),A=t(7266);let C=()=>{let e=(0,m.R_)({url:"/api/ExecPasswordConfig?list=true",queryKey:"PasswordSettings"}),i=(0,m.nN)({datafromUrl:!0,relatedQueryKeys:"PasswordSettings"}),t=e=>{i.mutate({url:"/api/ExecPasswordConfig",data:{passwordType:e},queryKey:"PasswordSettingsPost"})};return(0,s.jsx)(f.A,{title:"Password Style",cardSx:{display:"flex",flexDirection:"column",height:"100%"},CardButton:(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(y.A,{disableElevation:!0,sx:{"& .MuiButtonGroup-grouped":{borderRadius:0},"& .MuiButtonGroup-grouped:first-of-type":{borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px"},"& .MuiButtonGroup-grouped:last-of-type":{borderTopRightRadius:"4px",borderBottomRightRadius:"4px"}},children:[(0,s.jsx)(u.A,{disabled:!0,color:"primary",children:(0,s.jsx)(c.A,{fontSize:"small",children:(0,s.jsx)(A.A,{})})}),(0,s.jsx)(()=>["Classic","Correct-Battery-Horse"].map(l=>{var a,n;return(0,s.jsx)(u.A,{variant:(null==e?void 0:null===(n=e.data)||void 0===n?void 0:null===(a=n.Results)||void 0===a?void 0:a.passwordType)===l?"contained":"outlined",color:"primary",size:"small",disabled:i.isPending||e.isLoading,onClick:()=>t(l),children:l},l)}),{})]})}),children:(0,s.jsx)(b.A,{variant:"body2",children:"Choose your password style. Classic passwords are a combination of letters and symbols. Correct-Battery-Horse style is a passphrase, which is easier to remember and more secure than classic passwords."})})};var w=t(51895);let P=()=>{let e=(0,m.R_)({url:"/api/ExecDnsConfig?Action=GetConfig",queryKey:"DNSSettings"}),i=(0,m.nN)({datafromUrl:!0,relatedQueryKeys:"DNSSettings"}),t=e=>{i.mutate({url:"/api/ExecDnsConfig?Action=SetConfig",data:{Resolver:e},queryKey:"DNSResolverPost"})};return(0,s.jsx)(f.A,{title:"DNS Resolver",cardSx:{display:"flex",flexDirection:"column",height:"100%"},CardButton:(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(y.A,{disableElevation:!0,variant:"contained",size:"small",sx:{"& .MuiButtonGroup-grouped":{borderRadius:0},"& .MuiButtonGroup-grouped:first-of-type":{borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px"},"& .MuiButtonGroup-grouped:last-of-type":{borderTopRightRadius:"4px",borderBottomRightRadius:"4px"}},children:[(0,s.jsx)(u.A,{disabled:!0,color:"primary",children:(0,s.jsx)(c.A,{fontSize:"small",children:(0,s.jsx)(w.A,{})})}),(0,s.jsx)(()=>["Google","Cloudflare","Quad9"].map((l,a)=>{var n;return(0,s.jsx)(u.A,{variant:(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.Resolver)===l?"contained":"outlined",color:"primary",disabled:i.isPending||e.isLoading,onClick:()=>t(l),children:l},l)}),{})]})}),children:(0,s.jsx)(b.A,{variant:"body2",children:"Select your DNS Resolver. The DNS resolver is used for the domain analyser and the individual domain check only, not for generic DNS resolution."})})};var S=t(79803),R=t(82836),B=t(41055);let F=()=>{let e=(0,R.s)(),i=(0,m.nN)({datafromUrl:!0});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.A,{title:"Cache",cardSx:{display:"flex",flexDirection:"column",height:"100%"},CardButton:(0,s.jsx)(()=>(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(u.A,{variant:"contained",size:"small",onClick:e.handleOpen,disabled:i.isPending,children:[(0,s.jsx)(c.A,{fontSize:"small",style:{marginRight:4},children:(0,s.jsx)(B.A,{})}),"Clear Cache"]})}),{}),children:(0,s.jsx)(b.A,{variant:"body2",children:"Use this button to clear the caches used by CIPP. This will slow down some aspects of the application, and should only be used when instructed to do so by support."})}),(0,s.jsx)(S.B,{title:"Clear Cache",createDialog:e,fields:[{type:"switch",name:"tenantsOnly",label:"Only Clear the Tenant Cache"}],api:{url:"/api/ListTenants",confirmText:"This will clear the cache used by CIPP. This will slow down some aspects of the application, and should only be used when instructed to do so by support. This will delete any cache tables including pending audit logs that have not yet been processed. Are you sure you want to continue?",type:"POST",data:{ClearCache:!0},replacementBehaviour:"removeNulls"},row:{}})]})};var z=t(41835),k=t(48230),D=t.n(k);let N=()=>{(0,R.s)();let e=(0,m.nN)({datafromUrl:!0});return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(f.A,{title:"Backup",cardSx:{display:"flex",flexDirection:"column",height:"100%"},CardButton:(0,s.jsx)(()=>(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(u.A,{variant:"contained",size:"small",component:D(),disabled:e.isPending,href:"/cipp/settings/backup",children:[(0,s.jsx)(c.A,{fontSize:"small",style:{marginRight:4},children:(0,s.jsx)(z.A,{})}),"Manage Backups"]})}),{}),children:(0,s.jsx)(b.A,{variant:"body2",children:"Manage the system configuration backups for CIPP. This will not include authentication information or extension configuration. You can also set an automated daily backup schedule."})})})};var T=t(18791),L=t(50945),I=t(17825),_=t(68723),E=t(58105),O=t(88992);let G=()=>{var e,i;let t=(0,I.t)(),[l,a]=(0,v.useState)(null),[n,o]=(0,v.useState)((null==t?void 0:null===(e=t.customBranding)||void 0===e?void 0:e.logo)||null),r=(0,O.mN)({mode:"onChange",defaultValues:{colour:(null==t?void 0:null===(i=t.customBranding)||void 0===i?void 0:i.colour)||"#F77F00"}}),c=(0,m.nN)({datafromUrl:!0,relatedQueryKeys:["BrandingSettings","userSettings"]});return(0,s.jsx)(f.A,{title:"Branding Settings",cardSx:{display:"flex",flexDirection:"column"},CardButton:(0,s.jsxs)(d.A,{sx:{display:"flex",gap:1},children:[(0,s.jsx)(u.A,{variant:"contained",size:"small",onClick:()=>{var e;let i={colour:r.getValues().colour,logo:l||(null==t?void 0:null===(e=t.customBranding)||void 0===e?void 0:e.logo)||null};t.handleUpdate({customBranding:i}),c.mutate({url:"/api/ExecBrandingSettings",data:{Action:"Set",...i},queryKey:"BrandingSettingsPost"})},disabled:c.isPending,startIcon:(0,s.jsx)(T.A,{}),children:"Save Branding"}),(0,s.jsx)(u.A,{variant:"outlined",size:"small",onClick:()=>{a(null),o(null),r.reset({colour:"#F77F00"}),t.handleUpdate({customBranding:{colour:"#F77F00",logo:null}}),c.mutate({url:"/api/ExecBrandingSettings",data:{Action:"Reset"},queryKey:"BrandingSettingsReset"})},disabled:c.isPending,children:"Reset"})]}),children:(0,s.jsxs)(d.A,{sx:{display:"flex",flexDirection:"column",gap:2,flex:1},children:[(0,s.jsx)(b.A,{variant:"body2",sx:{mb:1},children:"Customize your organization's branding for reports and documents. Changes will be applied to all generated reports."}),(0,s.jsxs)(d.A,{children:[(0,s.jsx)(b.A,{variant:"subtitle2",sx:{mb:1,fontWeight:"bold"},children:"Logo"}),(0,s.jsxs)(d.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,s.jsx)("input",{accept:"image/*",style:{display:"none"},id:"logo-upload",type:"file",onChange:e=>{let i=e.target.files[0];if(i){if(i.size>2097152){alert("File size must be less than 2MB");return}let e=new FileReader;e.onload=e=>{let i=e.target.result;a(i),o(i)},e.readAsDataURL(i)}}}),(0,s.jsx)("label",{htmlFor:"logo-upload",children:(0,s.jsx)(u.A,{variant:"outlined",component:"span",size:"small",startIcon:(0,s.jsx)(L.A,{}),sx:{alignSelf:"flex-start"},children:"Upload Logo"})}),n&&(0,s.jsx)(d.A,{sx:{mt:1},children:(0,s.jsx)("img",{src:n,alt:"Logo preview",style:{maxWidth:"100px",maxHeight:"50px",objectFit:"contain",border:"1px solid #ddd",borderRadius:"4px",padding:"4px"}})}),(0,s.jsx)(b.A,{variant:"caption",color:"textSecondary",children:"Recommended: PNG format, max 2MB, optimal size 200x100px"})]})]}),(0,s.jsxs)(d.A,{children:[(0,s.jsx)(b.A,{variant:"subtitle2",sx:{mb:1,fontWeight:"bold"},children:"Brand Color"}),(0,s.jsxs)(d.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,s.jsx)("input",{type:"color",value:r.watch("colour")||"#F77F00",onChange:e=>r.setValue("colour",e.target.value),style:{width:"50px",height:"40px",border:"1px solid #ddd",borderRadius:"4px",cursor:"pointer"}}),(0,s.jsx)(E.A,{type:"textField",name:"colour",formControl:r,label:"Hex Color",sx:{width:"120px"},validators:{pattern:{value:/^#[0-9A-F]{6}$/i,message:"Please enter a valid hex color (e.g., #F77F00)"}}})]}),(0,s.jsx)(b.A,{variant:"caption",color:"textSecondary",sx:{mt:.5,display:"block"},children:"This color will be used for accents and highlights in reports"})]}),(0,s.jsxs)(d.A,{sx:{mt:1},children:[(0,s.jsx)(b.A,{variant:"subtitle2",sx:{mb:1,fontWeight:"bold"},children:"Preview"}),(0,s.jsxs)(d.A,{sx:{p:2,border:"1px solid #ddd",borderRadius:1,backgroundColor:"#f9f9f9",display:"flex",alignItems:"center",gap:2},children:[n&&(0,s.jsx)("img",{src:n,alt:"Logo",style:{width:"40px",height:"40px",objectFit:"contain"}}),(0,s.jsxs)(d.A,{children:[(0,s.jsx)(b.A,{variant:"h6",sx:{color:r.watch("colour")||"#F77F00",fontWeight:"bold"},children:"Your Organization"}),(0,s.jsx)(b.A,{variant:"body2",color:"textSecondary",children:"Executive Report Preview"})]})]})]}),(0,s.jsx)(_.v,{apiObject:c})]})})},V=()=>(0,s.jsx)(l.A,{sx:{pt:3},maxWidth:"xl",children:(0,s.jsxs)(a.A,{container:!0,spacing:2,children:[(0,s.jsx)(a.A,{size:{lg:4,md:6,sm:12,xs:12},children:(0,s.jsx)(j,{})}),(0,s.jsx)(a.A,{size:{lg:4,md:6,sm:12,xs:12},children:(0,s.jsx)(C,{})}),(0,s.jsx)(a.A,{size:{lg:4,md:6,sm:12,xs:12},children:(0,s.jsx)(P,{})}),(0,s.jsx)(a.A,{size:{lg:4,md:6,sm:12,xs:12},children:(0,s.jsx)(F,{})}),(0,s.jsx)(a.A,{size:{lg:4,md:6,sm:12,xs:12},children:(0,s.jsx)(N,{})}),(0,s.jsx)(a.A,{size:{lg:4,md:6,sm:12,xs:12},children:(0,s.jsx)(G,{})})]})});V.getLayout=e=>(0,s.jsx)(o.P,{children:(0,s.jsx)(n.L,{tabOptions:r,children:e})});let K=V}},e=>{var i=i=>e(e.s=i);e.O(0,[7929,636,6593,8792],()=>i(58263)),_N_E=e.O()}]);