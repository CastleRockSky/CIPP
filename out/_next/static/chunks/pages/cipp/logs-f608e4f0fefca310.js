(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5962],{34717:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var r=a(14232);let l=r.forwardRef(function(e,t){let{title:a,titleId:l,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),a?r.createElement("title",{id:l},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))})},52527:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>k});var r=a(37876),l=a(14232),n=a(12435),s=a(29390),i=a(46061),o=a(7881),d=a(88326),c=a(22474),u=a(94810),h=a(77018),m=a(37746),g=a(67578),x=a(47737),p=a(59568),y=a(87505),f=a(88992),j=a(58105),v=a(34717),w=a(56372),A=a(22875);let D=["DateTime","Tenant","TenantID","User","Message","API","Severity","AppId","IP","LogData"],b=[{label:"View Log Entry",link:"/cipp/logs/logentry?logentry=[RowKey]",icon:(0,r.jsx)(A.A,{}),color:"primary"}],S=()=>{let e=(0,f.mN)({defaultValues:{startDate:null,endDate:null,username:"",severity:[]}}),[t,a]=(0,l.useState)(!1),[n,A]=(0,l.useState)(!1),[S,k]=(0,l.useState)(null),[L,C]=(0,l.useState)(null),[E,T]=(0,l.useState)(null),[I,_]=(0,l.useState)(null),F=e.watch("startDate"),z=e.watch("endDate");return(0,r.jsx)(s.a,{tableFilter:(0,r.jsxs)(o.A,{expanded:t,onChange:()=>a(!t),children:[(0,r.jsx)(d.A,{expandIcon:(0,r.jsx)(y.A,{}),children:(0,r.jsxs)(c.A,{direction:"row",spacing:1,alignItems:"center",children:[(0,r.jsx)(u.A,{children:(0,r.jsx)(v.A,{})}),(0,r.jsxs)(h.A,{variant:"h6",children:["Logbook Filters",n?(0,r.jsxs)("span",{style:{fontSize:"0.8em",marginLeft:"10px",fontWeight:"normal"},children:["(",S||L?(0,r.jsxs)(r.Fragment,{children:[S?new Date(S.replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3")+"T00:00:00").toLocaleDateString():new Date().toLocaleDateString(),S&&L?" - ":"",L?new Date(L.replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3")+"T00:00:00").toLocaleDateString():""]}):null,E&&(S||L)&&" | ",E&&(0,r.jsxs)(r.Fragment,{children:["User: ",E]}),I&&(E||S||L)&&" | ",I&&(0,r.jsxs)(r.Fragment,{children:["Severity: ",I.replace(/,/g,", ")]}),")"]}):(0,r.jsxs)("span",{style:{fontSize:"0.8em",marginLeft:"10px",fontWeight:"normal"},children:["(Today: ",new Date().toLocaleDateString(),")"]})]})]})}),(0,r.jsx)(m.A,{children:(0,r.jsx)("form",{onSubmit:e.handleSubmit(e=>{var t;A(null!==e.startDate||null!==e.endDate||null!==e.username||(null===(t=e.severity)||void 0===t?void 0:t.length)>0),k(e.startDate?new Date(1e3*e.startDate).toISOString().split("T")[0].replace(/-/g,""):null),C(e.endDate?new Date(1e3*e.endDate).toISOString().split("T")[0].replace(/-/g,""):null),T(e.username||null),_(e.severity&&e.severity.length>0?e.severity.map(e=>e.value).join(","):null),a(!1)}),children:(0,r.jsxs)(p.A,{container:!0,spacing:2,children:[(0,r.jsx)(p.A,{size:{sm:7,xs:12},children:(0,r.jsxs)(i.A,{severity:"info",children:["Use the filters below to narrow down your logbook results. You can filter by date range, username, and severity levels. By default, the logbook shows the current day based on UTC time. Your local time is"," ",-(new Date().getTimezoneOffset()/60)," hours offset from UTC."]})}),(0,r.jsx)(p.A,{size:{sm:7,xs:12},children:(0,r.jsxs)(c.A,{direction:"row",spacing:2,children:[(0,r.jsx)(g.A,{flexGrow:1,children:(0,r.jsx)(j.A,{type:"datePicker",name:"startDate",label:"Select Start Date",dateTimeType:"date",formControl:e})}),(0,r.jsx)(g.A,{flexGrow:1,children:(0,r.jsx)(j.A,{type:"datePicker",name:"endDate",label:"Select End Date",dateTimeType:"date",formControl:e,validators:{validate:t=>{let a=e.getValues("startDate");return t&&!a?"Start date must be set when using an end date":!(a&&t&&new Date(1e3*t)<new Date(1e3*a))||"End date must be after start date"}}})})]})}),(0,r.jsx)(()=>{if(!F||!z)return null;let e=new Date(1e3*F),t=(new Date(1e3*z)-e)/864e5;return t>10?(0,r.jsx)(p.A,{size:7,children:(0,r.jsxs)(i.A,{severity:"warning",children:["You have selected a date range of ",Math.ceil(t)," days. Large date ranges may cause timeouts or errors due to the amount of data being processed. Consider narrowing your date range if you encounter issues."]})}):null},{}),(0,r.jsx)(p.A,{size:{sm:7,xs:12},children:(0,r.jsx)(j.A,{type:"textField",name:"username",label:"Filter by Username",formControl:e,placeholder:"Enter username to filter logs",fullWidth:!0})}),(0,r.jsx)(p.A,{size:{sm:7,xs:12},children:(0,r.jsx)(j.A,{type:"autoComplete",name:"severity",label:"Filter by Severity",formControl:e,multiple:!0,options:[{value:"Info",label:"Info"},{value:"Warn",label:"Warning"},{value:"Error",label:"Error"},{value:"Critical",label:"Critical"},{value:"Alert",label:"Alert"},{value:"Debug",label:"Debug"}],placeholder:"Select severity levels"})}),(0,r.jsx)(p.A,{size:{xs:12},children:(0,r.jsxs)(c.A,{direction:"row",spacing:2,children:[(0,r.jsx)(x.A,{type:"submit",variant:"contained",color:"primary",startIcon:(0,r.jsx)(u.A,{children:(0,r.jsx)(v.A,{})}),children:"Apply Filters"}),(0,r.jsx)(x.A,{variant:"outlined",color:"primary",startIcon:(0,r.jsx)(u.A,{children:(0,r.jsx)(w.A,{})}),onClick:()=>{e.reset({startDate:null,endDate:null,username:"",severity:[]}),A(!1),k(null),C(null),T(null),_(null),a(!1)},children:"Clear Filters"})]})})]})})})]}),title:"Logbook Results",apiUrl:"/api/Listlogs",simpleColumns:D,queryKey:"Listlogs-".concat(S,"-").concat(L,"-").concat(E,"-").concat(I,"-").concat(n),tenantInTitle:!1,apiData:{StartDate:S,EndDate:L,User:E,Severity:I,Filter:n},actions:b})};S.getLayout=e=>(0,r.jsx)(n.P,{children:e});let k=S},56372:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var r=a(14232);let l=r.forwardRef(function(e,t){let{title:a,titleId:l,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),a?r.createElement("title",{id:l},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))})},67900:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/cipp/logs",function(){return a(52527)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[636,6593,8792],()=>t(67900)),_N_E=e.O()}]);