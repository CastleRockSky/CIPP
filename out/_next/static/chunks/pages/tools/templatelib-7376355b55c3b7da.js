(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7887],{42120:(e,t,l)=>{"use strict";l.d(t,{A:()=>s});var a=l(93944),n=l(37876);let s=(0,a.A)((0,n.jsx)("path",{d:"m14 7-5 5 5 5z"}),"ArrowLeft")},44238:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>A});var a=l(37876),n=l(14232),s=l(77018),i=l(46061),r=l(71538),o=l(59017),c=l(88992),d=l(12435),u=l(90240),m=l(58105),p=l(17825),h=l(35764),x=l(59568),j=l(46402);let v=()=>{(0,p.t)().currentTenant;let e=(0,c.mN)({mode:"onChange",defaultValues:{ca:!1,intuneconfig:!1,intunecompliance:!1,intuneprotection:!1}}),t=(0,c.FH)({control:e.control,name:"templateRepo"});return(0,n.useEffect)(()=>{(null==t?void 0:t.value)&&e.setValue("templateRepoBranch",{label:t.addedFields.branch,value:t.addedFields.branch})},[null==t?void 0:t.value]),(0,a.jsx)(u.A,{formControl:e,queryKey:"TemplateLibrary",title:"Template Library",hideBackButton:!0,postUrl:"/api/AddScheduledItem?DisallowDuplicateName=true",customDataformatter:e=>{var t,l,a,n,s,i;let r=new Date;r.setHours(0,0,0,0);let o=Math.floor(r.getTime()/1e3)-45;return{TenantFilter:(null==e?void 0:null===(t=e.tenantFilter)||void 0===t?void 0:t.value)?null==e?void 0:null===(l=e.tenantFilter)||void 0===l?void 0:l.value:"No tenant",Name:"CIPP Template ".concat((null===(a=e.tenantFilter)||void 0===a?void 0:a.value)?null===(n=e.tenantFilter)||void 0===n?void 0:n.value:null===(s=e.templateRepo)||void 0===s?void 0:s.value),Command:{value:"New-CIPPTemplateRun"},Parameters:{TemplateSettings:{...e}},ScheduledTime:o,Recurrence:{value:(null===(i=e.tenantFilter)||void 0===i?void 0:i.value)?"4h":"7d"}}},children:(0,a.jsxs)(x.A,{container:!0,spacing:3,children:[(0,a.jsxs)(x.A,{size:12,children:[(0,a.jsx)(s.A,{sx:{mb:2},children:"Template libraries are tenants set up to retrieve the latest version of a specific tenants policies. These are then stored in CIPPs templates, allowing you to keep an up to date copy of the policies.This copy occurs every 4 hours."}),(0,a.jsx)(s.A,{children:"There are also template repositories, these are community driven and are used to share templates with other users. Template repositories are downloaded when new versions are released."}),(0,a.jsx)(i.A,{severity:"warning",sx:{my:2},children:"Enabling this feature will overwrite templates with the same name."})]}),(0,a.jsx)(r.A,{sx:{mt:2,width:"100%"}}),(0,a.jsxs)(x.A,{container:!0,spacing:2,sx:{alignItems:"center",my:1,width:"100%"},children:[(0,a.jsx)(x.A,{size:{md:5,xs:12},children:(0,a.jsx)(h.w,{formControl:e,multiple:!1,disableClearable:!1})}),(0,a.jsx)(x.A,{size:{md:2,xs:12},sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,a.jsx)(o.A,{label:"OR",color:"info"})}),(0,a.jsx)(x.A,{size:{md:5,xs:12},children:(0,a.jsx)(m.A,{name:"templateRepo",type:"autoComplete",label:"Community Repository",api:{url:"/api/ListCommunityRepos",queryKey:"CommunityRepos",dataKey:"Results",valueField:"FullName",labelField:e=>"".concat(e.Name," (").concat(e.URL,")"),addedField:{branch:"DefaultBranch"}},formControl:e,multiple:!1})})]}),(0,a.jsx)(r.A,{sx:{mt:2,width:"100%"}}),(null==t?void 0:t.value)&&(0,a.jsxs)(x.A,{size:12,children:[(0,a.jsx)(s.A,{variant:"h6",sx:{mb:2},children:"Repository Branch"}),(0,a.jsx)(m.A,{type:"autoComplete",name:"templateRepoBranch",label:"Select Branch",formControl:e,api:{url:"/api/ExecGitHubAction",data:{Action:"GetBranches",FullName:null==t?void 0:t.value},queryKey:"".concat(null==t?void 0:t.value,"-Branches"),dataKey:"Results",valueField:"name",labelField:"name"},multiple:!1})]}),(0,a.jsxs)(j.A,{formControl:e,field:"templateRepo",compareType:"doesNotContain",compareValue:"CIPP",children:[(0,a.jsxs)(x.A,{size:12,children:[(0,a.jsx)(s.A,{variant:"h6",sx:{mb:1},children:"Conditional Access"}),(0,a.jsx)(m.A,{type:"switch",name:"ca",label:"Create Conditional Access Templates",formControl:e})]}),(0,a.jsxs)(x.A,{size:12,children:[(0,a.jsx)(s.A,{variant:"h6",sx:{mb:1},children:"Intune"}),(0,a.jsx)(m.A,{type:"switch",name:"intuneconfig",label:"Create Intune Configuration Templates",formControl:e}),(0,a.jsx)(m.A,{type:"switch",name:"intunecompliance",label:"Create Intune Compliance Templates",formControl:e}),(0,a.jsx)(m.A,{type:"switch",name:"intuneprotection",label:"Create Intune Protection Templates",formControl:e})]})]}),(0,a.jsx)(j.A,{formControl:e,field:"templateRepo",compareType:"contains",compareValue:"CIPP-",children:(0,a.jsxs)(x.A,{size:12,children:[(0,a.jsx)(s.A,{variant:"h6",sx:{mb:1},children:"Template Repository files"}),(0,a.jsx)(m.A,{type:"switch",name:"standardsconfig",label:"Create Template Standards",formControl:e}),(0,a.jsx)(m.A,{type:"switch",name:"groupTemplates",label:"Create Group Templates",formControl:e}),(0,a.jsx)(m.A,{type:"switch",name:"policyTemplates",label:"Create Policy Templates",formControl:e}),(0,a.jsx)(m.A,{type:"switch",name:"caTemplates",label:"Create CA Templates",formControl:e})]})})]})})};v.getLayout=e=>(0,a.jsx)(d.P,{children:e});let A=v},90240:(e,t,l)=>{"use strict";l.d(t,{A:()=>y});var a=l(37876),n=l(89099),s=l(67578),i=l(86650),r=l(22474),o=l(47737),c=l(94810),d=l(77018),u=l(54538),m=l(24933),p=l(17675),h=l(42120),x=l(22322),j=l(68723),v=l(14232),A=l(88992),f=l(2303);let y=e=>{let{title:t,backButtonTitle:l,titleButton:y,formPageType:C="Add",children:b,queryKey:w,formControl:T,postUrl:g,customDataformatter:F,resetForm:R=!1,hideBackButton:P=!1,hidePageType:N=!1,hideTitle:I=!1,hideSubmit:_=!1,allowResubmit:E=!1,addedButtons:k,...z}=e,S=(0,n.useRouter)(),B=(0,x.nN)({datafromUrl:!0,relatedQueryKeys:w}),{isValid:V,isDirty:q}=(0,A.lN)({control:T.control});return(0,v.useEffect)(()=>{if(delete S.query.tenantFilter,S.query){let e={...T.getValues(),...S.query};T.reset(e)}},[S]),(0,v.useEffect)(()=>{B.isSuccess&&R&&T.reset()},[B.isSuccess]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.v,{title:t}),(0,a.jsx)(s.A,{sx:{flexGrow:1,py:4},children:(0,a.jsx)(i.A,{maxWidth:"lg",children:(0,a.jsxs)(r.A,{spacing:4,children:[!I&&(0,a.jsxs)(r.A,{spacing:2,children:[!P&&(0,a.jsx)("div",{children:(0,a.jsx)(o.A,{color:"inherit",onClick:()=>{S.back()},startIcon:(0,a.jsx)(c.A,{fontSize:"small",children:(0,a.jsx)(h.A,{})}),children:l})}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,a.jsxs)(d.A,{variant:"h4",children:[!N&&(0,a.jsxs)(a.Fragment,{children:[C," - "]}),t]}),y&&y]})]}),(0,a.jsxs)(u.A,{children:[(0,a.jsxs)(m.A,{children:[b,(0,a.jsx)(j.v,{apiObject:B})]}),!_&&(0,a.jsx)(p.A,{sx:{justifyContent:"flex-end"},children:(0,a.jsxs)(r.A,{spacing:2,direction:"row",children:[k&&k,(0,a.jsx)(o.A,{disabled:B.isPending||!V||!E&&!q,onClick:T.handleSubmit(()=>{if(T.trigger(),!V)return;let e=F?F(T.getValues()):T.getValues();Object.keys(e).forEach(t=>{(""===e[t]||null===e[t])&&delete e[t]}),B.mutate({url:g,data:e})}),type:"submit",variant:"contained",children:"Submit"})]})})]})]})})})]})}},97651:(e,t,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/tools/templatelib",function(){return l(44238)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[636,6593,8792],()=>t(97651)),_N_E=e.O()}]);