(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6231],{68734:(e,s,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/domains",function(){return n(80547)}])},80547:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>w});var i=n(37876),a=n(77328),r=n.n(a),t=n(14232),d=n(67578),l=n(86650),o=n(22474),c=n(54538),h=n(71538),m=n(47737),u=n(5596),x=n(47866),j=n(3034),A=n(77018),p=n(68284),y=n(46061),C=n(7957),g=n(78523),D=n(82836),f=n(12435),b=n(31540),_=n(87429),E=n(41055),N=n(22322),S=n(33905);let v=()=>{(0,t.useRef)();let e=(0,D.s)(),s=(0,N.nN)({urlFromData:!0,relatedQueryKeys:"users"}),n=(0,S.Wx)({initialValues:{domainName:""},onSubmit:async(e,n)=>{try{s.mutate({url:"/api/AddCustomDomain",...e}),n.resetForm(),n.setStatus({success:!0}),n.setSubmitting(!1)}catch(e){n.setStatus({success:!1}),n.setErrors({submit:e.message}),n.setSubmitting(!1)}}});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r(),{children:(0,i.jsx)("title",{children:"Devices"})}),(0,i.jsxs)(d.A,{sx:{flexGrow:1,py:4},children:[(0,i.jsx)(_.E,{}),(0,i.jsx)(l.A,{maxWidth:"xl",sx:{height:"100%"},children:(0,i.jsx)(o.A,{spacing:4,sx:{height:"100%"},children:(0,i.jsxs)(c.A,{sx:{display:"flex"},children:[(0,i.jsx)(h.A,{}),(0,i.jsx)(b.x,{title:"Domains",cardButton:(0,i.jsx)(m.A,{onClick:e.handleOpen,children:"Add Domain"}),actions:[{label:"Delete domain",type:"GET",url:"api/DeleteCustomDomain",data:{domain:"Domain"},icon:(0,i.jsx)(E.A,{})}],simple:!1,api:{url:"api/ListCustomDomains"},columns:[{header:"Domain",accessorKey:"Domain"},{header:"Status",accessorKey:"Status"}]})]})})})]}),(0,i.jsx)(u.A,{fullWidth:!0,maxWidth:"sm",onClose:e.handleClose,open:e.open,children:(0,i.jsxs)("form",{onSubmit:n.handleSubmit,children:[(0,i.jsx)(x.A,{children:"Add Domain"}),(0,i.jsxs)(j.A,{children:[(0,i.jsx)(A.A,{variant:"body2",children:"To add a domain to your instance, set your preferred CNAME to your CIPP default domain, then add the domain here."}),(0,i.jsx)(o.A,{spacing:3,children:(0,i.jsx)(p.A,{fullWidth:!0,label:"Name",name:"domainName",onBlur:n.handleBlur,onChange:n.handleChange})})]}),(0,i.jsxs)(j.A,{children:[s.isPending&&(0,i.jsxs)(y.A,{severity:"info",children:[(0,i.jsx)(C.A,{size:15})," Adding domain..."]}),s.isError&&(0,i.jsxs)(y.A,{severity:"error",children:["Error adding domain: ",s.error.response.data]})]}),(0,i.jsxs)(g.A,{children:[(0,i.jsx)(m.A,{color:"inherit",onClick:e.handleClose,children:"Cancel"}),(0,i.jsx)(m.A,{variant:"contained",type:"submit",children:"Add Domain"})]})]})})]})};v.getLayout=e=>(0,i.jsx)(f.P,{children:e});let w=v}},e=>{var s=s=>e(e.s=s);e.O(0,[7347,636,6593,8792],()=>s(68734)),_N_E=e.O()}]);